<doc>
  <source auto="true" type="str" verify="true"><![CDATA[https://cyberleninka.ru/article/n/planirovanie-sbis-metodom-adaptivnogo-poiska]]></source>
  <category auto="true" type="str" verify="true"><![CDATA[Автоматика]]></category>
  <author auto="true" type="list" verify="true">
    <item type="str"><![CDATA[Лебедев В.Б.]]></item>
  </author>
  <title auto="true" type="str" verify="true"><![CDATA[Планирование СБИС методом адаптивного поиска]]></title>
  <keywords auto="true" type="list" verify="true"/>
  <annotation auto="true" type="str" verify="true"><![CDATA[]]></annotation>
  <text auto="true" type="str" verify="true"><![CDATA[Проблемная формулировка. Планирование СБИС заключается в размещении на поле кристалла блоков, имеющих заданную площадь и не имеющих фиксированных размеров [1-5]. Основной целью оптимизации является минимизация общей площади кристалла. Проблема планирования формулируется следующим образом [6]. Имеется множество модулей М = (ш1 | 1=1,2,...,п}. Каждый модуль характеризуется тройкой < Б1,11, и1,> где из Б1 - площадь модуля, а параметры 11 и и1 задают нижнюю и верхнюю границу значения —, т.е. w4 I, < А- < и, w, (1) где И1 - это высота модуля, —1 - ширина модуля. В качестве плана кристалла будем использовать план, полученный путем рекурсивного использования «гильотинного разреза», т.е. последовательного разрезания прямоугольников на две части. На рис.І.а представлен план, а на рис.1.6 -соответствующее ему дерево Б={^ | ) = 1,2,...,2п-1} «гильотинного разреза», листьями которого являются вершины, соответствующие блокам, а внутренние вершины соответствуют разрезам: V -вертикальный, Н - горизонтальный. Я А В Е Б С Б в Н Рис.1. Работа выполнена при финансовой поддержке РФФИ (проект №99-01-00050) 4 1 6 2 3 8 7 5 а План для множества модулей М представляет собой прямоугольник Я, разрезанный вертикальными и горизонтальными линиями на множество областей г1 в каждую из которых помещается соответственно модуль ш1. На дереве цифрами помечены вершины, соответствующие разрезам, причем V - вертикальный разрез, а Н - горизонтальный разрез. Буквами помечены вершины, соответствующие областям. Каждая область г1, предназначенная для размещения модуля ш1, имеет размеры х1 и у1. Очевидно, что размеры области должны соответствовать ограничениям 81 < Х1 • у1 , И < у1 , '1 < Х1 (2) при одновременном соблюдении ограничений (1). В некоторых случаях задают границы отношения высоты И0 к ширине '0 прямоугольника Я, т.е. 1о < < Щ (3) ^о П Площадь области г1 определяется как х1 • у1, общая площадь Е = 1=1 Показатель Б используется в качестве критерия. Цель оптимизации - минимизация показателя Б, т.е. общей суммарной площади плана Я, при соблюдении ограничений (1), (2) и (3). Формирование плана методом свертки. Процесс синтеза плана включает . . это, во-первых, задать структуру этого дерева, т.е. последовательность бинарных , - , , , указать тип разреза Н или V. В третьих, пометить листья дерева номерами областей. Второй этап заключается в метризации плана, т.е. в определении размеров , . В работе [7] предложен генетический алгоритм синтеза дерева разрезов и построения оптимального плана. Если модули имеют фиксированные размеры и ори, бинарной свертки областей по дереву разрезов, начиная от листьев дерева. Каждой внутренней вершине дерева разрезов будет соответствовать область, полученная в результате бинарной свертки поддерева, имеющего корнем эту внутреннюю вершину. Будем считать, что разрез с номером 1, разрезает вершину ф (область и).В начале свертки каждой вершине ^, являющейся листом дерева разрезов, ставится в соответствие область г1 с размерами х1 = И1, у1 = '1, равные размерам модуля ш1. В процессе свертки начальные размеры каждой области г1 могут изменяться в сторо-. Поставим в соответствие каждой внутренней вершине ^ дерева разрезов об- и1, , своим корнем вершину ^. Пусть в соответствии с деревом разрезов Б вершины ^ и ^ являются дочерними вершинами вершины ^ и пусть для областей и1 и и, соответствующих ^ и й| уже определены нижние границы их размеров (хъ у1), (х|, у) Процесс бинарной свертки представляет собой слияние областей и1 и и|, формирование области ик, определение размеров для ик и новых размеров для и1 и щ. Обозначим через шах(хьх2) максимальное значение из Х! и х2. При слиянии по вертикали ук = шах(у1,у|); хк = х1 + х| у1 и у| будет иметь размер равный Рис.2. шах(у1,у|). При слиянии по горизонтали ук = у1 + у| хк = шах(х1,х|); х1 и х_| будет шах(х1,х|). Пусть для нашего примера (см.рис.1) при фиксированных размерах модулей (А,В,С,Б,Е,Р,0,Н,1) после метризации план с размещенными в областях модулями имеет вид, представленный на рис.2. Будем различать размеры (И1,'1) модуля ш1 от А } размеров (х1,у1) области г1, в которую помещен ш1. Размеры ('0, И, ) описывающего прямоугольника определятся как: '0 = х! = 'Е + + 'т ; И = ИЕ + + ИН + . Уменьшить общие размеры (Ио,'0) можно уменьшив в первую очередь размеры , -жений, определяющих величины Ь0 И '0. Организация поискового процесса. В работе используется два подхода к уменьшению общей площади 8Я прямоугольника Я: 8Я = И0 • Wo . При первом подходе размеры модулей фиксированы. Можно изменять ориентацию модулей. Для заданного дерева разрезов отыскиваются ориентации модулей, обеспечивающие при свертке минимальные значения показателя Б = 8Я . При втором подходе размеры модулей могут изменяться в соответствии с ограничениями (1),(2),(3). Для заданного дерева разрезов отыскиваются размеры модулей, соответствующих ограничениях (1),(2),(3) и обеспечивающих при свертке минимальное значение показателя Б = 8Я . Представим исходную формулировку задачи в виде адаптивной системы, работающей на основе моделирования коллективного поведения автоматов адапта-. . ш1 - щении в области будем задавать параметром о1. о1е{1,2}, т.е. для ш1 возможны два способа (две ориентации) размещения в области и1 . Обозначим через (И11,'11) раз- 0 0 10 0 1 меры ш1 при о1 = 1, а через (И 1,' 1) размеры ш1 при о1 = 2. При этом И 1 = ' 1, И 1 = ' 1 , И11 < И21, > '21 . ш1, к1 к2 —7 < 1, а при второй ориентации > 1. м/1 Множество модулей М={ш1|1=1,2,...,п} с фиксированными размерами, дерево разрезов Б={^||=1,2,...,2п-1} и ориентации модулей 0={о1|1=1,2,...,п} однозначно , . Пространство решений составляют решения отличающиеся друг от друга значениями элементов множества О, задающими ориентацию модулей. Процесс поиска в пространстве решений оптимального решения представим в виде адаптивной системы работающей в условиях неопределенности. На каждом шаге работы адаптивной системы под действием адаптирующего воздействия осуществляется переход от одной вершины пространства к другой, т.е. перевыбор альтернативных значений элементов множества О. В качестве объектов адаптации будем рассматривать модули ш1. Каждый объект может быть только в одном из двух альтернативных состояний (А11,А21). Состояние объекта адаптации соответствует выбран-( ). Пусть для множества модулей М с фиксированными размерами задан некоторый первоначальный план, т.е. задано дерево разрезов, ориентация модулей в соответствии с выбранными альтернативами, произведена свертка областей и сформированы выражения для определения значений параметров Из и '0 прямоугольника Я. ш1 с ш1 модулей М1 = М \ ш1. Состояние среды определяется выбранными для всех . -, . Глобальная цель коллектива объектов адаптации, т.е. множества модулей М, достичь такого состояния, при котором значение критерия Б имеет минимальное . Введем для оценки состояния объекта адаптации (т.е. модуля ш1) в среде два параметра <Р1х,Р1у>. Р1х = 1, если размер '1 модуля ш1 входит в состав выражения, определяющего ширину '0 прямоугольника Я; Р1х = 0 . Р1 = 1, И1 ш1 , высоту И0 прямоугольника Я; Р1 = 0 . Возможны четыре комбинации значений параметров <Р1х, Р1у>: <0,0>, <0,1>, <1,0>, <1,1>. Если Р1х = 1, то предпочтительней будет альтернатива А21, т.к. '21 < '11, и , следовательно, в выражение для '0 войдет меньшая величина. Если Р1у = 1, то предпочтительней будет альтернатива А11, т.к. И11 < И21, и , сле-, И0 . <Р1х, Р1у>. Р1х = 1, если '1 = х1, т.е. ширина '1 модуля ш1 равна ширине х1 области г1; Р1х = 0 . Ру = 1, если И1 = у1, т.е. высота И1 модуля ш1 равна высоте у1 области г1; Р1у = 0 . Р1х = 1 Р1 = 1 - , , к минимизации размеров области, а следовательно и всего плана в целом. ш1 - ветствие автомат адаптации АА1 с двумя группами состояний {С11 , С21 }, соответствующих двум альтернативам А11 и А21. Число состояний в группе задается параметром р1, называемым глубиной памяти. На вход автомата адаптации АА1 подается сигнал “поощрение” или “нак^ание” в зависимости от состояния объекта адап-( ш1) . .3 - - тации. Знаком (+) помечены переходы под действием сигнала “поощрение”, зна-(-) “ ”. Методика выработки управляющих сигналов заключается в следующем. Если предпочтительная альтернатива в соответствии со значениями пары па-<Р1х, Р1у> , вырабатывается сигнал поощрения, в противном случае сигнал наказания. Отметим, что в случае когда пара параметров <Р1х, Р1у> имеет значение <0,0> или <1,1> предпочтительной альтернативы нет. Поэтому в случае <0,0> управляющий сиг- л1, Л2, нал не вырабатывается вообще. Рис.3. А в случае <1,1> с вероятностью Р = 0 0,2 вырабатывается сигнал поощре- ния. Выработка сигнала поощрения в такой ситуации, способствует выходу из ло. -. На рис.4. в таблице приведены правила выборки управляющих сигналов. р1 А X р1 Г У Предпочтительная альтернатива Реализованная альтернатива Управляющий сигнал 0 1 А1! Л1, (+) 0 1 А1! Л2, (-) 1 0 А21 Л1, (-) 1 0 А21 Л2, (+) 0 0 Нет Л1, или Л2, Нет 1 1 Нет Л1, или Л2, (-) с вероятностью Р Рис 4. Локальная цель каждого объекта адаптации (модуля ш1) - достичь такого состояния при котором предпочтительная альтернатива совпадает с реализованной. Работа адаптивной системы на каждой итерации осуществляется за четыре . На первом такте в соответствии с выражениями для определения размеров сторон Wo и И, прямоугольника Я для каждого модуля ш , определяются значения пары параметров <Рх, Р1у >. На втором такте для каждого автомата адаптации в соответствии со значениями пары параметров <Рх, Р1у > и состоянием автомата адаптации (С2, или С1,) вырабатываются управляющие сигналы (“поощрение” или “наказание”). На третьем такте под действием управляющего сигнала осуществляется переход в автоматах адаптации . На четвертом такте в соответствии с состояниями автоматов адаптации реализуется альтернативы для модулей ш,, т.е. выбираются их соответствующие ориентации. Затем с помощью процедуры свертки строится план, определяются выражения для определения размеров параметров w0 и Ь0, и размеры всех областей. На рис.5. показан псевдокод алгоритма работы адаптивной системы планирования кристалла СБИС с меняющейся ориентацией модуля. Algorithm ПЛАНИРОВАНИЕ КРИСТАЛЛА СБИС С МЕНЯЮЩЕЙСЯ ОРИЕНТАЦИЕ МОДУЛЯ begin параметры = ИСХОДИЫЕ ДАННЫЕ; дерево = ГЕНЕРАЦИЯ (параметры) ; состоянаа = ВЫБОР НА Ч_СОСТОЯН (параметры) ; ориент = РЕАЛ_АЛЬТЕРНАТИВ (состоян_аа) ; план = СВЕРТКА (дерево, ориент, параметры) ; итерация = ЧИСЛО^ТЕРАЦИЙ; while (ггтерация > 0) do { состоян_объект = ВЫБОР (тан, параметры) ; управл_сигнал = УПРАВЛ (состоян_объект, ориент) ; состоян аа = ПЕРЕХОД (состоян_аа, управл_сигмал) ; ориент = РЕАЛ_АЛЬТЕРНАТИВ (состоян_аа) ; план = СВЕРТКА (дерево, ориент, параметры) ; итерация = итерация_1; }; end Рис.5. В массиве параметры хранятся исходные данные, это описание модулей (число, размеры, и т.п.) С помощью процедуры ГЕНЕРАЦИЯ (параметры) генерируется дерево разрезов D, информация о нем хранится в массиве дерево. Способы генерации дерева разрезов могут быть различны. Это и случайная генерация, и генерация на основе анализа соотношения размеров модулей и т.п. С помощью процедуры ВЫБОР_НА Ч СОСТОЯН (параметры) синтезируются автоматы адаптации и выбираются (как правило случайным образом) начальные состояния автоматов адаптации. Результат работы процедуры заносятся в массив состояна а. Процедурой РЕАЛ АЛБТЕРНАТИВ (состоян аа) в соответствии с состояниями автоматов определяются альтернативы и фиксируются ориентации модулей. Результаты заносятся в массив ориент. Далее процедурой СВЕРТКА (дерево, ориент, параметры) строится план, формируются выражения для определения размеров параметров w0 и ho, и рассчитываются размеры всех областей. Этой же процедурой рассчитывается значение критерия оптимизации F. План с лучшим значением критерия F запоминается. Параметру итерация присваивается значение числа итераций, которые будет . - . На первом такте процедурой ОЦЕНКА (тан, параметры) для каждого модуля рассчитываются значения пары параметров <P‘x, P‘y> которые заносятся в массив состоян_объект. На втором такте процедурой УПАРВЛ (состоян объект, ориент) вырабатываются управляющие сигналы (“поощрение”, “наказание”), которые заносятся в массив управл_сигн ал. На третьем такте процедурой ПЕРЕХОД (состоян аа, управл_сигнал) осуществляются переходы в автоматах адаптации под действием управляющих сигналов. На четвертом такте описанными выше процедурами РЕАЛ_АЛЬТЕРНАТИВ (состоян ии) и СВЕРТКА (дерево, ориент, параметры), строится новый план, соответствующий новой ориентации модулей. Экспериментальные исследования показали, что с помощью переориентации модулей можно снизить общую площадь кристалла в несколько раз. Рассмотрим второй подход к построению плана, связанный с возможностью изменения размеров модулей в соответствии с ограничениями (1),(2),(3). При втором подходе решение полностью определяется деревом разрезов Б и массивом размеров областей в = {&2 | !=1,2,... ,п}, где ^ = <х,, у,>. Пространство решений составляют решения <Б,в> отличающиеся массивами в. На каждом шаге работы адаптивной системы под действием адаптирующего воздействия происходит изменение размеров модулей. Объект адаптации и среда те же самые, что и при первом подходе. Параметры и методика оценки состояния объекта адаптации аналогичны рассмотренным выше, т.е. состояние объекта адаптации в среде определяется двойкой ^ P1 > А х? А у • Однако, альтернативы, определяющие поведение объекта адаптации, а следовательно структуру моделирующего автомата адаптации и механизмы переходов в , . Поведение объекта адаптации в среде регламентируется тремя альтернативами: А1,, А2,, А3, . При задании альтернативы А1, у модуля ш, уменьшается И, и соответственно к увеличивается w1, при этом должны соблюдаться ограничения < —L < Ti, и И, • w1 = 8, =сош1 Задается параметр 8 изменения р азмера модуля. Новые значения И*, и w*1 в соответствие с альтернативой А1, определяется следующим образом. £ Если И, > w1 , то И*, = И, - 8, а w*1 = ’ Если И1 < —1 , то w*1 = —1 + 8, а И*1 = Кг -8 8- +8 Это делается для того, чтобы изменения размера (увеличение или уменьше-) , 8. При задании альтернативы А3, у модуля ш, увеличивается И, и соответственно уменьшается w1 . £ Если И, > w1 , то И*, = И, + 8, а w*1 = ’ Если И1 < —1 , то -*1 = —1 - 8, а И*1 = К +8 8- -8 При задании альтернативы А 1 размеры модуля остаются неизменными. Для реализации механизма адаптации каждому модулю т1 ставится в соответствие автомат адаптации АА1 с тремя группами состояний {С11, С2, С31}, соответствующих трем альтернативам А11, А21, А31 (рис.б). Механизм выработки управляющего сигнала (“поощрение” или “нак^ание”) основан на следующих соображениях. Если один из параметров двойки <РХ, Ру> равен единице, то целесообразно уменьшить либо w1 (дая случая <1,0>), либо И1 (дая случая <0,1>). Если АА1 находятся в этой группе состояний, которой соответствуют альтернатива предусматривающая подобное уменьшение, то вырабатывается сигнал “поощрение”, в противном случае - сигнал “наказание”. С1і ■ !(-) к-) (-) Если значение двойки равно <1,1>, то независимо от того в какой группе состояний находится АА1 вырабатывается с вероятностью Р=0^0,2 сигнал “наказание”. Параметр Р является настроечным и может быть подобран в результате экспериментальных исследований. Вероятностная выработка сигнала “нак^ание” для случая , когда двойка имеет значение <1,1> предназначена для выхода из локального оптимума. Если значение двойки равно <0,0> и АА1 находится в группе С21, то вырабатывается сигнал “поощрение”, в противном случае - сигнал “наказание”. Переходы АА1 из группы С21 в группу С11 или С31 осуществляются следующим . С21 - дит в промежуточное состояние Ъг. За время нахождения АА1 в группе С21 подсчитывается число наказаний а1, полученных при Р1х=1, а также общее число наказа- а ний р1. Тогда после перехода из С11 в Ъ„ сразу же с вероятностью Р = осуще- ствляется переход в С11, а с вероятностью 1-Р в С31. В таблице представленной на рис.7 приведены правила выработки управ. Р1 Х Р1 г у Состояние АА1 Управляющий сигнал 0 1 С3і (+) 0 1 С11 или С21 (-) 1 0 С!1 (+) 1 0 С21 или С31 (-) 0 0 С21 (+) 0 0 С11 или С31 (-) 1 1 /'-'1 р2 /~'3 Ь Ь '-'•1 (-) с вероятностью Р Рис.7. Локальная цель объекта адаптации (модуля mt) - достичь состояния при котором оценивающая двойка имеет вид т.е. такого состояния, когда размеры (Wj, hj) модуля mj совпадают с размерами (x;, yO области гь в которую помещен щ. Глобальная цель коллектива - достичь состояния с минимальным значением критерия F. Работа адаптивной системы на каждой итерации осуществляется за четыре . На первом такте для каждого объекта определяются значения двойки <PJx, Pjy > . На втором такте вырабатываются управляющие сигналы (“поощрение”, “наказание”). На третьем такте осуществляются переходы в автоматах адаптации под действием управляющих сигналов. На четвертом такте реализуются альтернативы, соответствующие состояниям . . свертки строится план. Определяются выражения для размеров w0 и ho и размеры . F . На рис.8 приведен псевдокод алгоритма работы адаптивной системы планирования кристалла СБИС с изменяющимися размерами модулей. Основные отличия псевдокода (см.рис.8) от псевдокода (см.рис.5) заключается в следующем. С помощью процедуры ОПРЕДЕЛ_НА Ч^НА Ч (параметры) определяются начальные значения размеров модулей, которые заносятся в массив размеры. Возможны два режима. Либо размеры всех модулей выбираются случайно с соблюдением всех ограничений из (1),(2),(3), либо размеры у всех модулей выбираются так, чтобы wj =hj. Процедурой ВЫБОР_НА ЧСОСТОЯН (параметры) синтезируются автоматы адаптации, затем каждый из них приводится в начальное состояние. Возможны два режима. При первом режиме автоматы приводятся в первое 2j. - 1j ,C2j ,С\ Algorithm ПЛАНИРОВАНИЕ^РИСТАЛЛА СБИС С ИЗМЕНЯЮЩИМИСЯ РАЗМЕРАМИ МОДУЛЕЙ begin параметры = ИСХОДНЫЕДАННЫЕ; дерево = ГЕНЕРАЦИЯ (парметры) ; размеры = ОПРЕДЕЛ^АЧ^ИАЧЕН (параметры) ; план = СВЕРТКА (дерево, размеры, параметры) ; состоянаа = ВЫБОР_НАЧ_СОСТОЯН(параметры) ; итерация = ЧИСЛО_ИТЕРАЦИЙ; while (итерация > 0) do { состоян_объект = ОЦЕНКА (тан, параметры) ; управл_сигмал = УПРАВЛ (состоян_объект, ориент) ; состоян аа = ПЕРЕХОД (состоян_аа, управл_сигнал) ; размер = РЕАЛ АЛЬТЕРНАТИВ (состоян_аа) ; тан = СВЕРТКА (дерево, размеры, параметры) ; итерация = итерация_1; } ; end Рис.8. Процедура РЕАЛ АЛЬТЕРНАТИВ (состоянаа) реализует альтернативы соответствующие состояниям автоматов адаптации и заносит скорректированные размеры модулей в массив размеры. Остальные процедуры функционально не отличаются от одноименных процедур, рассмотренных в псевдокоде алгоритма планирования кристалла СБИС с меняющейся ориентацией модулей. Экспериментальные исследования приведенного алгоритма показали, что качество решения зависит от параметра 8. Целесообразно использовать переменное значение 8(t), уменьшающееся в процессе работы адаптивной системы. Экспериментальные исследования. Исследования проводились на примерах, содержащих до 200 блоков. Наилучшие результаты были получены при глубине памяти q=2. При планировании кристалла СБИС с изменяющейся ориентацией модулей общая площадь плана уменьшалась в среднем на 40 процентов. При планировании кристалла СБИС с изменяющимися размерами модулей в среднем площадь плана уменьшалась в 2-3 раза. Исследования показали, что временная сложность алгоритма имеет оценку O(n), где n - число блоков. В среднем пяти запусков программы со случайным планированием было достаточно для получения результата близкого к оптимальному. ]]></text>
</doc>
