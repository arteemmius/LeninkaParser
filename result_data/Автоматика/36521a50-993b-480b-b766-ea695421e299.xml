<doc>
  <source auto="true" type="str" verify="true"><![CDATA[https://cyberleninka.ru/article/n/izmerenie-ugla-naklona-obekta-na-videokadre-nizkogo-razresheniya-s-ispolzovaniem-apriornoy-informatsii]]></source>
  <category auto="true" type="str" verify="true"><![CDATA[Автоматика]]></category>
  <author auto="true" type="list" verify="true">
    <item type="str"><![CDATA[Алфёров Сергей Михайлович]]></item>
  </author>
  <title auto="true" type="str" verify="true"><![CDATA[Измерение угла наклона объекта на видеокадре низкого разрешения с использованием априорной информации]]></title>
  <keywords auto="true" type="list" verify="true">
    <item type="str"><![CDATA[алгоритм]]></item>
    <item type="str"><![CDATA[фильтр]]></item>
    <item type="str"><![CDATA[Измерение]]></item>
    <item type="str"><![CDATA[угол]]></item>
    <item type="str"><![CDATA[граница объекта]]></item>
    <item type="str"><![CDATA[кадр]]></item>
  </keywords>
  <annotation auto="true" type="str" verify="true"><![CDATA[Предлагается комплекс алгоритмов для определения угла наклона объекта с высокой точностью на кадре низкого разрешения.]]></annotation>
  <text auto="true" type="str" verify="true"><![CDATA[Предлагается комплекс алгоритмов для определения угла наклона объекта с высокой точностью на кадре низкого разрешения. Ключевые слова: алгоритм, фильтр, измерение, угол, граница объекта, кадр. При автоматизации технологических процессов в производстве часто требуется определять положение объекта. Одним из параметров положения является угол наклона прямой границы объекта. Так, на ОАО «Манотомь», в процессе модернизации производственного процесса возникла задача: измерение угла наклона прямой границы объекта с точностью ±0,5° при помощи видеокамеры разрешением 320x240. Для выделения границ объекта удобно использовать популярный фильтр Собела [1]. Но данный фильтр выделяет границу недостаточно точно и требует большого количества вычислений. Самый простой метод измерение угла по двум точкам границы. Так как граница объекта на кадре никогда не бывает четкой и всегда есть помехи (не идеально белый фон, появление возле границы объекта других мелких объектов, дающих тень, и т.д.), в результате погрешность измерения координат граничной точки достигает 3 пикселей при использовании предложенной видеокамеры. Таким образом, при расстоянии между найденными граничными точками 100 пикселей, погрешность измеренного угла составит ±0,03 рад, или ±1,7° (см. рис. 1). Постановка задачи Построить и реализовать в программе алгоритм определения угла наклона объекта черного цвета на видеокадре 320x240 с точностью 0,5°. Объект черного цвета может располагаться на белом фоне, на фоне стального или медного механизма. Возможно попадание в кадр болтов, гаек, шестеренок или других мелких предметов. Время измерения угла не должно превышать 500 мс. Априорная информация: 1) особенность технологического процесса предоставляет область поиска, заданную точками А1, А2 и протяженностью Ь, и примерное направление поиска границы ёА (рис. 2); 2) исследуя яркость фона и искомого объекта, можно заранее настроить фильтр, заданный узловыми точками Х0 и ХиУ{ - ломаной, огибающей прецеденты (рис. 3), по оси абсцисс откладывается яркость фона (Ьг1), по оси ординат - яркость объекта (Ьг2). Избыточная информация: последовательность нескольких кадров, похожих друг на друга. В случае неудачного измерения на одном кадре есть возможность определить угол на следующем кадре. Истинная граница ЕИ N :■ - Найденная “ точка границы 100 пикселей Найденная точка границы ------у— «Размытая» граница Объекі Рис. 1. Погрешность измерения угла Рис. 2. Область поиска С.М. Алфёров. Измерение угла наклона объекта на видеокадре низкого разрешения 169 Решение задачи Далее предложен комплекс алгоритмов. Алгоритм определения угла границы Вход: кадр (матрица цветных пикселей); набор фильтров, каждый для определенного типа фона. Рис. 3. Способ задания фильтра Выход: угол границы объекта. 1. Цикл для A = A1, A2 с шагом s. 1.1. Цикл для каждого /-го фильтра из набора фильтров. 1.1.1. Найти точку границы, соответствующую i-му фильтру, и записать в список. 2. Определить угол у* по точкам из списка. Алгоритм поиска точки, соответствующей фильтру Вход: кадр; точка A, с которой начинать поиск; направление и шаг изменения dA; используемый фильтр f Выход: x, у - координаты точки. 1. Определить координаты первой точки поиска (x1, y1):=A. 2. Цикл до определения координат искомой точки или выхода за пределы области поиска. 2.1. br1:= яркость точки (x1, у1). 2.2. Для k=2,.,7 (цикл для отсеивания мелких темных предметов или теней). 2.2.1. Найти точку (x2, у2) на расстоянии к пикселей от (x1, у1) в направлении поиска. 2.2.2. br2:= яркость точки (x2, у2). 2.2.3. Определить признак: входит ли в область фильтра f пара яркостей (br 1, br2). 2.3. Если для всех к=2,.,7 фильтр выдал истину, то искомая точка найдена (x1, у1). 2.4. Перейти к следующей точке (x1, у1) в заданном направлении dA. 3. Если нашли искомую точку, то возвратить ее координаты (x1, у1), иначе возвратить NULL. Алгоритм определения угла границы по точкам из списка Вход: список из п точек (п может быть произвольным для разных списков). Выход: угол наклона массива точек. 1. Обнулить массив H, состоящий из 180 или 360 ячеек (в зависимости от особенности задачи), где номер ячейки соответствует углу, значение ячейки соответствует количеству случаев определения данного угла. 2. Построить гистограмму углов между точками. Цикл i = 1, 1 2 —п 3 2.1. Цикл у = г + 3 п , ..., п. 2.1.1. Определить угол у отрезка между г-й и у-й точками с точностью 1°. 2.1.2. В ячейке массива Н под номером у увеличить значение на 1. 3. Найти максимум гистограммы и соответствующий ему угол утах (номер ячейки массива Н). 4. Определить количество отрезков, попавших в интервал от утах - Д до утах + Д (остальные отрезки отсеиваются как ошибочные), по формуле ^тах C = H ^_^тах Д где Д - окрестность, за пределами которой значение Ну практически не меняется, по предварительным исследованиям получили Д = 5. 5. Если С > ТТСР, где СР - общее количество отрезков включенных в гистограмму, то: 5.1. Возвратить средневзвешенный угол: у* = C ymax +д : ((-Ну). 5.2. Иначе возвратить ошибку. Результаты работы Были проведены два эксперимента с использованием видеокамеры разрешением 320x240, длина границы объекта на кадре примерно 100 пикселей. В ходе экспериментов для двух различных положений объекта были получены результаты, приведенные на рис. 4, 5 и в таблице. Точки на графиках показывают количество измерений (ось ординат), попавших в интервалы размером 0,1°, и измеренные значения углов (ось абсцисс). 1200 n \ I I \ 0 • * • * 175,4 175,6 175,8 176 176,2 176,4 176,6 Рис. 4. Гистограмма измерений для опыта №1 Рис. 5. Гистограмма измерений для опыта №2 Результаты экспериментов 1 V=Vmax-Д № опыта Количество измерений углов V* Оценка истинного значения Разброс измерений Фон 1 2293 175,95o 0,15o или 9' Белый 2 1677 35,95o 0,25o или 15' Стальной механизм Заключение В результате работы построен и реализован в среде Delphi [2] алгоритм определения угла наклона объекта. Программа выполняет измерения с достаточной точностью. Из таблицы видно, что при изменении характера фона максимальное отклонение измерения увеличивается в два раза, но остается в допустимых пределах. Программа дает успешный результат в 95% случаев измерений. Время измерения не превышает 300 мс с учетом времени загрузки кадра (от 15 до 80 мс) на компь -ютере с процессором AMD Athlon 1,81 ГГц, ОЗУ 496 Мб под управлением операционной системы MS Windows XP Professional Service Pack 3. Алгоритм применяется в производстве на ОАО «Мано-томь». ]]></text>
</doc>
