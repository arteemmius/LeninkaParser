<doc>
  <source auto="true" type="str" verify="true"><![CDATA[https://cyberleninka.ru/article/n/matematicheskaya-model-mnogopotochnoy-sistemy-massovogo-obsluzhivaniya-upravlyaemoy-planirovschikom-resursov]]></source>
  <category auto="true" type="str" verify="true"><![CDATA[Автоматика]]></category>
  <author auto="true" type="list" verify="true">
    <item type="str"><![CDATA[Белоусов С. М.]]></item>
  </author>
  <title auto="true" type="str" verify="true"><![CDATA[Математическая модель многопоточной системы массового обслуживания, управляемой планировщиком ресурсов]]></title>
  <keywords auto="true" type="list" verify="true"/>
  <annotation auto="true" type="str" verify="true"><![CDATA[]]></annotation>
  <text auto="true" type="str" verify="true"><![CDATA[Операционная система (ОС) в наибольшей степени определяет облик вычислительной системы в целом. Она обеспечивает повышение эффективности использования компьютера путем рационального управления его ресурсами. От эффективности алгоритмов управления ресурсами компьютера во многом зависит эффективность работы всей системы. Если все процессы имеют одинаковый приоритет, управление является справедливым в случае, когда все они в среднем находятся в одинаковых условиях (например, среднее время ожидания одно и то же); если же приоритеты разные, то понятие справедливости в общем случае определить трудно, однако ясно, что качество обслуживания (например, величина, обратная времени ожидания, или какая-нибудь другая величина) должно быть возрастающей функцией приоритета и два процесса с равными приоритетами должны получать одинаковую обработку. Известно, что некоторые алгоритмы управления связаны с риском перевода какого-либо процесса в состояние ожидания на неопределенное время: это явление, называемое «отстранением», отражает несправедливость распределения, и его следует избегать. Когда процессы используют несколько ресурсов, возможны два других нежелательных последствия. Взаимная блокировка представляет собой неопределенную по времени блокировку нескольких процессов, из которых каждый ожидает освобождения ресурсов, занятых другими. Избыточное число запросов на некоторые виды ресурсов может привести к ухудшению качества системы в целом. В ряде случаев недоработки в подсистеме распределения ресурсов операционной системы зачастую могут привести к неработоспособности вычислительной системы. Понять поведение систем под разной нагрузкой можно путем разработки математических моделей и методов рационального распределения ресурсов с учетом неопределенных неблагоприятных факторов. Структурно-функциональная схема управляемой системы массового обслуживания Схема системы массового обслуживания представлена ниже (рис. 1). Кругами обозначены задачи различного типа, которые находятся в очередях, решаются в одном из потоков процессора (для определенности на схеме показаны 4 потока) или уже решены. Цифра в правом нижнем углу прямоугольника, изображающего подсистему, означает его номер. Он отслеживается в истории каждой задачи (по этому номеру устанавливается, в какой из подсистем находится задача в каждый момент времени). Поступающие в систему задачи по уровню значимости (приоритету) подразделяются на M типов. Характерное значение параметра M составляет 16. Более приоритетные задачи системой считаются всегда раньше, чем менее приоритетные. Значимость gm каждого типа задачи может определяться номером т ее типа или величиной, пропорциональной т. 1818-7900. Вестник НГУ. Серия: Информационные технологии. 2006. Том 4, выпуск 1 © С. М. Белоусов, 2006 В дальнейшем будем называть приоритет задачи ее типом. Коэффициент пропорциональности удобно выбрать из условия, чтобы сумма значимостей задач всех типов была нормирована на 1: М 2 с. = і т = 1 В этом случае С. = 2 М # М + 1) ; при М = 16: С т = т/136. Помимо того, что каждая задача относится к некоторому типу, она также принадлежит одному из 2-х классов. Вход Очередь Многопоточный Решенные процессор задачи О О (определение времени С решения задач, В • Г) ► проверка ограничении 3 —► • • <— по продолжительности СО я О решения) & • I & 2 и о и и и с ей і к ООО о ( ) ► О н • ••• О & Накопитель О О Сі С) С) о к ( ) • • • ± я О О С & 1 о ► о о о о о о о • ••• <— • С) С) с о о с о • 1 3 4 Ресурсы Ресурс 1 Ресурс 2 Ресурс 3 Ресурс 4 - Ресурс 5 и Ті Ті Ті Ті Ресурс 6 Ресурс 7 Ресурс 8 Ресурс 9 Ресурс 10 Планировщик ресурсов Рис. 1. Структурно-функциональная схема управляемой системы массового обслуживания В первый класс входят обычные задачи, в качестве которых мы будем рассматривать обслуживание типового Ы1р-запроса клиента. Это относительно короткие задачи, как уже указывалось, считается, что каждая задача обслуживает 100 запросов и завершается. При темпе запросов 3 в единицу времени (секунду) и 10 задачах, живущих параллельно, получается, что, для того чтобы 10 задач завершили свою деятельность, им требуется обслужить 10 х 100 = 1 000 запросов, которые придут за 1 000 / 3 = 333 единицы времени, т. е. порядок времени жизни задачи 102. Второй класс составляют задачи, решение которых требует проведения значительно большего количества операций (так называемые «счетные задачи»); процесс решения счетных задач занимает значительно большее время. Общее количество счетных задач примерно на порядок меньше общего количества обычных задач. С другой стороны, внутри каждого типа частоты поступления задач различных классов могут существенно различаться между собой. Эти задачи чаще всего могут рассматриваться как обслуживающие (например, осуществление резервного копирования или сложных расчетов). Таким образом, каждая задача характеризуется парой целых чисел (тип, класс). Принимается, что потоки задач всех типов на входе системы - случайные и квазистационарные, законы распределения количеств поступающих на вход задач - показательные, т. е., функция распределения ^(0 величины промежутка времени ^ между поступлениями двух задач одного типа определяется как ^ (0 = 1 — е ТМ, где Тт - среднее время между поступлениями двух задач одного типа. Такое допущение адекватно отражает особенности реальных потоков задач от многих клиентов, в которых наблюдается независимость прихода отдельных задач (как известно из теории вероятности [Венцель, 1962; Венцель, Овчаров, 1988; Гихман и др., 1979; Гнеденко, 1954; Иванов-Мусатов, 1979], наложение большого количества случайных потоков приводит к простейшему потоку с показательным законом распределения). 1,2 В общем случае величины Тт(х) различны для разных типов задач и зависят от системного времени х (текущее время суток). Свойство квазистационарности потоков означает, что интенсивности поступления задач в систему могут слабо изменяться в течение времени порядка 1 000 с, но в каждый момент х законы распределения промежутков времени между поступлениями очередных задач - показательные. Естественно предположить, что в течение рабочего дня с 9.00 до 18.00 существует некоторый характерный профиль спроса на время процессора (рис. 2), имеющий несколько максимумов и минимумов. При общей длительности рабочего дня 9 часов общее время функционирования Т^много-поточного процессора составит 32 400 с. Для решения задач требуется N типов ресурсов. Потребности задач в ресурсах определяются матрицами Я и V: 0,8 0,6 н °>4 0,2 10 11 12 13 14 15 час дня 16 17 18 19 Рис. 2. Профиль интенсивности потоков задач Я = Гі 'їм Гм Элементы Я определяют среднюю потребность (математическое ожидание) т-й работы в п-м ресурсе. Понятно, что даже задачи одного типа не являются полностью идентичными и могут требовать различного ресурсного обеспечения. В качестве ресурсов будем понимать все возможные данные, которые задача в процессе своей жизнедеятельности порождает (или, вернее, которые создаются операционной системой и предоставляются в ее использование). Примерами таких ресурсов являются структуры ядра ОС, ассоциированные с открытыми файлами, объем используемой процессом виртуальной памяти, объем файла подкачки, используемого процессом, объем сетевых буферов данных и т. д. Для учета возможных разбросов величин ресурсов используется матрица О, элементы которой определяют среднеквадратичные отклонения (с. к. о.) величин требуемых ресурсов от их средних значений гт. Ол 0^2 °в ••• Ош °21 °22 °23 ••• °2Ы а = аш а21 а31 Таким образом, требуемые величины ресурсов для каждой работы рассматриваются как случайные величины. В частном случае, когда потребность некоторой m-й задачи в «-ресурсе определена однозначно, т. е. не случайна, следует считать От = 0. В дальнейшем считается, что случайные величины о„т соответствуют усеченным нормальным законам распределения с математическим ожиданием rm и от образующего нормального закона. Усечение производится со стороны отрицательных значений, что естественно из физических соображений: величины требуемых ресурсов не могут быть меньше нуля. Таким образом, требуемые величины Rm ресурсов образуют не дискретные, а непрерывные множества. Поступившая в систему задача запрашивает N типов ресурсов, необходимых для ее решения. Эти ресурсы локализованы в N источниках. В процессе своей жизнедеятельности задача может запросить у операционной системы какие-либо ресурсы или их освободить, причем это происходит достаточно регулярно по времени. Если задача получает все необходимые ресурсы, то она поступает в очередь. В противоположном случае, когда задача не получает в полном объеме хотя бы одного ресурса, она начинает ждать, или с точки зрения модели поступает в накопитель, где ожидает появления требуемой величины недостающего ресурса. Пополнение ресурсов в источниках происходит при окончательном решении некоторой задачи, когда она освобождает все захваченные ресурсы, или при обращении задачей за процедурой освобождения только части ресурсов (в этом случае принято допущение что она временно снимается с решения, так как система обычно выполняет при такой операции системный вызов ядра ОС, который также может быть проинтерпретирован как временное снятие задачи). Освободившиеся ресурсы захватываются задачами, находящими в накопителе. Если этих ресурсов оказывается достаточно для решения задачи, то она перемещается из накопителя в очередь (т. е. переходит из состояния ожидания ресурса в очередь готовых к исполнению задач). В рассматриваемой системе все очереди, а также совокупности решенных задач, структурированы по типам. Иначе говоря, существуют не одна общая очередь, а M различных очередей, в которых находятся однотипные задачи. То же самое относится и к последовательностям задач, которые ожидают поступления ресурсов в накопителе. Решение задач производится в многопоточном процессоре, состоящем из k одинаковых (система считается типа SMP - symmetric multiprocessing processor) потоков. Для начала решения задачи необходимо выполнение следующих условий: • наличие свободного потока; • присутствие по крайней мере одной задачи в одной из очередей; • нахождение процедуры перераспределения ресурсов в неактивном состоянии. Если в некоторый момент времени эти условия выполняются, то при наличии задач в нескольких очередях производится выбор типа задачи. Для этого формируются 3 вектора (массива) чисел. Первый определяет относительные значимости ат всех имеющихся в очередях задач: g am = {т~^------, ! { g mm т = 1 где 0, если m-я задача не присутствует в очереди, 1, если m-я задача находится в очереди. Сумма всех значимостей am задач, присутствующих в очередях, нормирована на 1. С помощью подобного механизма моделировались изменения приоритетов решаемых задач, вызванные эвристическими операциями драйверов ядра операционной системы, например временного повышения приоритета задачи после ожидания дискового обмена. Далее определяются текущие значимости Ь всех задач, решенных к рассматриваемому моменту времени: А = { # С # -—-------------, ! <Рт # Ст # гт т = 1 где 2т - общее количество решенных задач на текущий момент времени Ї. Сумма всех Ат также нормирована на 1. Следует отметить, что при определении Ат учитываются только типы задач, которые находятся в данный момент в очередях на входе в систему. Наконец, определяется комбинированный параметр Ст = ат + Ч (“т - А.), (1) где 0 # ч # 1 - коэффициент обратной связи, деформирующий совокупность ат значимостей задач на входе с учетом уже решенных задач. Для эмуляции работы реальной компьютерной системы без обратной связи можно считать Ч равным 0. Далее из очередей выбирается задача того типа, который соответствует максимальному значению параметра Ст: »о = А^ (тах Ст). Первая находящаяся в очереди задача типа т0 поступает на решение в свободный поток процессора. На начальной фазе функционирования системы может оказаться, что все 2т равны 0. В этом случае решение о поступающей в счетно-решающее устройство задачи принимается только с учетом параметров ат, т. е. из условия: т0 = А^ "тах а„}. Таким образом, в каждый момент времени производится непрерывная корректировка текущих значимостей решаемых задач (динамическое изменение их приоритетов). При выборе очередной задачи для решения предпочтение сдвигается в сторону типов задач, которые до текущего момента времени решались в меньшей степени, чем это должно быть в соответствии с базовым распределением их значимостей (рис. 3) деформация может возникнуть, например, из-за большого требуемого времени решения некоторых задач. Светло-серым цветом обозначены базовые значения значимостей задач на входе в систему (параметры ат). Темно-серый цвет соответствует значениям значимостей решенных задач, которые находятся на выходе системы (параметры Ат). Белым цветом обозначены динамические (текущие) значимости задач (параметры Ст), скорректированные при значении ч = ^. Из рис. 3 видно, что некоторые значения Ст могут быть отрицательными. Если из соображений удобства дополнительно потребовать, чтобы все Ст были неотрицательными величинами, то выражение (1) можно переписать в виде Ст = тах#0,ат + ч(“т - Ат)}. Очевидно, что при этом результат выбора приоритетной задачи не изменится. Параметр 4 - это один из параметров управления системой - планировщика ресурсов. По его месту и роли в системе управления -это параметр краткосрочного управления. Конкретное значение ч должно определяться в общей оптимизационной схеме обоснования рациональных параметров планировщика ресурсов. Основная задача краткосрочного управления - уменьшить количество поступающих в процессор задач некоторого типа, если количество уже решенных таких задач велико, и увеличить вероятность поступле- Рис. 3. Расчетная схема предлагаемого метода определения динамических значимостей задач для М = 16 ния в процессор более редких задач, т. е. обеспечить сбалансированность потоков решаемых задач с их среднестатистическими характеристиками. Приспособленность рассматриваемой системы к выполнению возлагаемых на нее функций оценивается следующей системой показателей качества. 1. Уровень «накладных расходов» или задержки ответа задачи на запрос пользователя. Этот показатель определяется средними суммарными дополнительными задержками задачи, время пребывания которой в накопителе истекло, до ее входов в счетно-решающее устройство, т. е. с того момента, когда есть все необходимое для решения задачи, до момента ее действительного решения; для удобства использования суммарное время нормируется на общее время обслуживания задачи системой. 2. Общая доля решенных задач за время функционирования системы в течение рабочего дня: М ! 7,4 _ т — 0 2 — “М , ! 7,0 т — 1 где Zт4, Zт0 - количества задач типа т, решенных и поступивших на вход системы за время ее функционирования (за рабочий день). 3. «Взвешенная» (с учетом значимости каждого типа задачи) доля решенных задач за время функционирования системы в течение рабочего дня: м 7 р3 — ! £т^-^. т — 1 VI Г 7 2^ Г т т0 т— 1 4. Степень загрузки процессора - отношение суммарного времени решения задач во всех потоках к величине k х Т ^ - количество потоков процессора). Первый показатель характеризует относительное время ожидания задачей дополнительных порций ресурса и ее задержку в очереди, т. е. в интегральном виде - эффективность функционирования планировщика ресурсов, а с точки зрения пользователя отражает «невынужденную» задержку системы при получении ею запроса. Под «вынужденной» задержкой здесь понимается время, которое необходимо потратить на расчет самого запроса (например, на собственно обработку Ы1р-запроса и ответа), а все остальное будет интерпретироваться как «вредная», «вынужденная» задержка, которую и необходимо по возможности уменьшить. Второй и третий показатели качества характеризуют эффективность функционирования системы в целом. В вопросе выбора рациональных параметров планировщика ресурсов они также должны учитываться. Четвертый показатель, также как и первый, относится к планировщику ресурсов: чем выше его значение, тем эффективнее в системе организована процедура ресурсного распределения. При проектировании рациональной системы следует стремиться к минимизации 1-го показателя качества и максимизации 2, 3 и 4-го показателей. Управление ресурсами Повышение качества функционирования рассматриваемой системы массового обслуживания достигается перераспределением ресурсов между различными источниками. Для этого в систему встроена специальная процедура (при программной реализации она может рассматриваться как задача дополнительного типа М + 1), которая, периодически включаясь, осуществляет перераспределение имеющихся в источниках свободных ресурсов для достижения их рационального распределения. При этом те источники, в которых перед включением процедуры уже нет свободного ресурса, получают его из других источников. Это дает возможность снабдить полным набором требуемых ресурсов находящиеся в накопителе задачи и интенсифицировать процесс их решения. Это опциональный шаг в решении задачи, который обычными планировщиками ресурсов операционных систем явным образом не исполь- зуется, но, по-видимому, является необходимым для улучшения качества функционирования системы. Управление ресурсами производится в несколько этапов. Этап 1 (осуществляется только один раз перед началом функционирования системы): поскольку в системе предусматривается схема перераспределения ресурсов, то логично применить этот полезный инструмент для рационального распределения ресурсов в начальный момент времени. Предположим, что известен профиль и — и(ц,и2,и3, ...,щ) рационального распределения общего располагаемого ресурса между различными источниками. Так как N ! и — 1, г — 1 то количество независимых параметров иг равно N - 1. По своему физическому смыслу величины иг - это параметры долгосрочного управления ресурсами вычислительной системы. Их конкретные значения должны устанавливаться в результате решения оптимизационной задачи по выбору рациональных параметров планировщика ресурсов. Этап 2 (может повторяться многократно в процессе функционирования системы): вводится дополнительный параметр АТ - минимальное время между последовательными включениями процедуры перераспределения ресурсов. В процессе функционирования системы отслеживается наступление события «дефицит ресурсов». Если это событие произошло в промежутке времени от г — АТ до г ( - текущее время), то генерируется специальный сигнал, переводящий процедуру перераспределения ресурсов в актуализированное состояние. При разблокированной процедуре с наступлением очередного момента времени на перераспределение ресурсов сначала проверяется наличие свободного потока процессора. Если в момент времени г такой поток имеется, то производится запуск процедуры перераспределения ресурсов. В противоположном случае запуск откладывается до ближайшего момента времени, когда в системе появится свободный поток. Этап 3 (может повторяться многократно в процессе функционирования системы): определяются количество свободных ресурсов во всех источниках: я — . г — 1 После этого все эти располагаемые ресурсы перераспределяются таким образом, чтобы обеспечить рациональный начальный профиль и свободных ресурсов в каждом источнике. При функционировании процедуры перераспределения ресурсов между источниками решение всех задач, находящихся в данный момент в счетно-решающем устройстве, приостанавливается. Продолжительность | перераспределения ресурсов (время задержки выполнения задач в счетно-решающем устройстве) зависит от суммарной величины Я* перетока ресурсов между источниками. Приближенно | определяется по следующему линейному соотношению: | — 0я* + |о, где 0 и |0 - константы; Я — !(Я — иЯ). В последнем выражении производится суммирование только положительных слагаемых. Новые (т. е. после действия процедуры перераспределения) значения ресурсов в источниках будут составлять Гг — иЯ. По окончании перераспределения ресурсов индикатор актуализации этой процедуры переводится в неактивное состояние, а минимальное время до следующего перераспределения ресурсов начинает отсчитываться с момента г + | завершения процедуры. Из изложенного следует, что АТ представляет собой параметр среднесрочного управления ресурсами системы. Таким образом, существуют 3 типа параметров управления. Общее количество независимых параметров управления составляет N + 1. Они образуют множество (вектор) параметров планировщика ресурсов: У — У (щ щ, щ,..., ип — 1, АТ, д). Величины всех компонентов вектора У подлежат определению при оптимизации планировщика ресурсов. Основные принципы построения математической модели Представленное выше описание основных особенностей и логики функционирования системы массового обслуживания, управляемой планировщиком ресурсов, приводит к необходимости применения для ее описания методов имитационного статистического моделирования. Детерминированные математические модели - слишком упрощенные, они могут неправильно учитывать взаимное влияние различных факторов и логику работы системы. С другой стороны, имитационные модели, наиболее полно и корректно описывая все основные фазы изучаемого процесса, позволяют получить максимально достоверные результаты. При изменении исходных законов распределения случайных величин они также могут позволить получить не один результат, а совокупность результатов, пригодных для использования в разных практических приложениях. Методы имитационного моделирования предполагают детальный анализ динамики системы, когда на каждом временном шаге появляется возможность корректно учесть возникающие изменения в подсистемах и параметрах внешней среды, отследить все логические условия и другие нелинейности процессов. Плата за это методическое удобство - необходимость многократного (несколько десятков, сотен и даже тысяч раз) анализа одного и того же процесса для получения статистически устойчивого результата. Определение основных характеристик системы осуществляется методом статистических испытаний (метод Монте-Карло). Результаты моделирования и их анализ На рис. 4-5 графически представлены результаты моделирования динамики параметров рассматриваемой вычислительной системы, соответствующие принятым выше исходным данным. У всех графиков по оси абсцисс отложено текущее время процесса в тысячах единиц. Данные на рис. 4 определяют изменения во времени доли решенных задач разного типа. Обращают на себя внимание следующие обстоятельства: • при г > 20-25 тыс. ед. наблюдается снижение доли решенных задач всех типов; • доля решенных задач нижних (1-6) типов оказывается заметно меньшей, чем для более высоких типов. Таким образом, при г > 20-25 тыс. ед. в системе проявляется некоторый негативный фактор, способствующий ухудшению ее финальных характеристик. Причем в большей мере этот фактор действует на счетные задачи (класс 2), которые в значительной степени представлены в типах 1-6. В целом финальные доли решенных задач всех типов оказывается на уровне 0,6-0,8. Это указывает на высокую приспособленность системы с рассматриваемым набором параметров (исходных данных) к выполнению ее функций. Следующая группа результатов моделирования - динамика максимальных и минимальных времен решения задач разных типов (рис. 6-7). а ------ тип 1 тип 2 б ------ тип 3 тип 4 в ------ тип 5 тип 6 г ------ тип 7 тип 8 Рис. 4. Доли решенных задач (структурно по типам) 7-6. 5 - 5 І 4 - 0 ІЗ 1 и ^2 + тах тіп 1 ■■ о - -і -- -НЧЧ-Н+Н+ГТТТТ77Т11111111111111111 16 20 время, ТЫС. ОТН. ед. 0,9 і 0,8 0,7Ц 0,6- 0 0,5 - В § 0,4 - 1 I. 0.3 - 1 &0-2Н 0,1 -о- -0,1 - тах тіп ,111111111ІІІІІІІІІІІІІІІІІІІІІІІІІІІІ ІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІ 4 8 12 16 20 24 28 32 время, ТЫС. ОТН. ед. а б 2,5 - 1,5 - 0,5 - тах тіп ІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІІ 8 12 16 20 24 28 32 -1,5 - время, тыс. отн. ед. в Рис. 5. Максимальное и минимальное время решения задач: а - задачи типа 1; б - типа 8; в - типа 14 Анализ определения минимальных и максимальных времен решения задач разных типов показывает следующее: • времена решения задач всех типов существенно - более, чем на порядок - превышают «чистые» времена решения задач; основная причина этого эффекта - задержка задач в накопителе и очереди после каждой фазы процесса решения, т. е. в основе своей задачи не являются «счетными»; • наиболее существенно различаются максимальное и минимальное времена решения для задач первых 8 типов; основная причина - наличие в структуре этих типов задач разных классов; при этом максимальные времена решения соответствуют задачам 2-го класса (счетные задачи), а минимальные - задачам 1-го класса (обычные задачи); • эта же причина приводит к тому, что максимальные времена решения задач типов 1-6 существенно (примерно на порядок) выше, чем максимальные времена решения типов 9-16; • для задач типов 1, 8, 14 (см. рис. 5) при г > 20-25 тыс. ед. наблюдается скачкообразное увеличение максимального времени решения; это обусловлено влиянием указанного выше негативного фактора, который начинает проявляться при г > 20-25 тыс. ед.; • с учетом того, что реальное время решения задач значительно превышает «чистое» время решения, целесообразно для его обозначения употреблять другой термин - время обслуживания, который является одним из терминов теории систем массового обслуживания. Результаты моделирования динамики показателей качества системы графически представлены на рис. 6, 7. Обращает на себя внимание стационарность значений первого показателя качества (см. рис. 7, темная линия), который определяет среднюю долю дополнительных задержек задачи в накопителе из-за недостатка одного или нескольких ресурсов, а также -в очереди. Финальные величины степени загрузки процессора (см. рис. 7, светлая линия) на первый взгляд невысокие. Но если учесть, что интенсивность задач на входе в систему - величина переменная (см. рис. 2), а ее среднее значение при принятых исходных данных составляет 0,643, и существует также переходной процесс в начале функционирования системы, то финальное значение 0,37 степени загрузки процессора оказывается около 60 % от ее максимальной величины. Оно может быть повышено при сокращении времени пребывания задач в накопителе или увеличении времени одной фазы решения задачи (в соответствии с принятыми исходными данными, эти времена равны 0,01 и 0,1 для задач 1-го и 2-го классов соответственно). Можно также отметить деформацию тенденции изменения со временем степени загрузки процессора при г > 20 тыс. ед. Это обусловлено увеличением к г = 20 тыс. ед. количества задач в накопителе, а также графиком загрузки системы от времени (см. рис 2). На рис. 7 изображены графики динамики показателей качества 2-го и 3-го типов - усредненных значений долей решенных задач (темная линия) и «взвешенной» доли решенных задач (светлая линия). В последнем случае в качестве весовых факторов использовались значимости задач разного типа. 0,8 0,6 1 0,4 0,2 0 -0,2 н. расх. степень время, тыс. отн. ед. Рис. 6. Показатели качества ДОЛЯ вз. доля время, отн. ед. Рис. 7. Доли решенных задач В целом форма этих графиков соответствует форме кривых для отдельных типов; также наблюдается появление эффекта снижения величин этих показателей при t > 20 тыс. ед. Финальные значения обоих показателей примерно равны 0,7. Для того чтобы наглядно показать действие процедуры перераспределения ресурсов между источниками, построены графики на рис. 8 и 9, которые относятся к одной реализации. На них четко видно, что за все время функционирования вычислительной системы несколько раз включалась процедура перераспределения ресурсов, в результате которой пополнялись дефицитные ресурсы в соответствующих источниках. Рис. 8. Величина ресурса в источнике время, тыс. отн. ед. Рис. 9. Величины ресурса в источнике (данные для одной реализации) ----- ресурс 2 ресурс 3 ресурс 9 ресурс 10 В результате проведенного моделирования установлено наличие некоторого негативного фактора, который снижает характеристики системы в конце ее функционирования. Поэтому актуально проведение дополнительного анализа по выявлению природы и характеристик этого негативного фактора. Представляется, что основной причиной его появления может считаться «повышение нагрузки» в 16 часов дня (см. рис. 2), т. е. выбранный режим нагрузки системы является для нее «предельным». Таким отрицательным фактором может быть и принятая схема изменения ресурсов при перемещении нерешенной задачи из процессора в накопитель. Напомним, что в соответствии с этой схемой задача изменяет требования по одному из ресурсов на относительную величину 5. Причем изменения равновероятны как в сторону увеличения требований, так и в сторону их уменьшения. Анализ основных особенностей и логики функционирования многопоточной вычислительной системы, как системы массового обслуживания, управляемой планировщиком ресурсов, приводит к необходимости применения для ее описания методов имитационного математического моделирования. Метод имитационного математического моделирования позволяет корректно учесть основные особенности функционирования системы и ее подсис- тем, а также динамику внешней системной среды (например, изменение интенсивности поступления задач в течение рабочего дня). В системе показателей качества используются 4 показателя: • уровень «накладных расходов»: средняя относительная величина суммарных дополнительных задержек задач в накопителе и в очереди - латентность решения задачи; • общая доля решенных задач за время функционирования системы в течение рабочего дня; • «взвешенная» с учетом значимости каждого типа задачи доля решенных задач за время функционирования системы в течение рабочего дня; • степень загрузки процессора - отношение суммарного времени решения задач во всех потоках к величине K х T . max Параметры планировщика ресурсов вычислительной системой подразделяются на 3 типа: долгосрочного, среднесрочного и краткосрочного управления. При этом общее количество параметров управления составляет N +1, где N - количество видов используемых ресурсов. В процессе функционирования вычислительной системы периодически (при наличии сигнала о недостатке хотя бы одного из ресурсов) производится перераспределение свободных ресурсов между разными источниками для обеспечения пропорций, установленными параметрами долгосрочного управления. Процедура перераспределения ресурсов занимает некоторое время, в течение которого приостанавливается решение задач в счетно-решающем устройстве. Результаты экспериментальных расчетов на математической модели с использованием принятой системы исходных данных по основным параметрам задач и их потоков позволили получить и представить графически данные о динамике всех основных параметров вычислительной системы, в том числе показателей качества системы, максимальных и минимальных продолжительностей обслуживания всех типов задач, величин располагаемых ресурсов в источниках. В результате математического моделирования динамики управляемой вычислительной системы установлен эффект повышения ресурсных требований со стороны некоторых задач, в первую очередь счетных. При неблагоприятном сочетании случайных факторов чрезмерное повышение ресурсных требований может привести к блокированию функционирования вычислительной системы. ]]></text>
</doc>
