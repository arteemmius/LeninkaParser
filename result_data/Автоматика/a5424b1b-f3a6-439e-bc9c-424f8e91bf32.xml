<doc>
  <source auto="true" type="str" verify="true"><![CDATA[https://cyberleninka.ru/article/n/osnovnye-trebovaniya-k-organizatsii-podsistemy-svyazi-intellektualnyh-datchikov-vibratsii]]></source>
  <category auto="true" type="str" verify="true"><![CDATA[Автоматика]]></category>
  <author auto="true" type="list" verify="true">
    <item type="str"><![CDATA[Пьявченко А.О.]]></item>
  </author>
  <title auto="true" type="str" verify="true"><![CDATA[Основные требования к организации подсистемы связи интеллектуальных датчиков вибрации]]></title>
  <keywords auto="true" type="list" verify="true"/>
  <annotation auto="true" type="str" verify="true"><![CDATA[]]></annotation>
  <text auto="true" type="str" verify="true"><![CDATA[Применение интеллектуальных датчиков вибрации (ИДВ), как правило, связано с необходимостью проведения оперативного контроля состояния сложного технического оборудования в процессе его работы с целью предотвращения процессов возникновения и развития нештатных ситуаций. Контроль состояния оборудования, как правило, ведется сразу несколькими датчиками. Оцифрованная и отфильтрованная информация собирается на управляющей ЭВМ системы мониторинга и диагностики с целью дальнейшей обработки. Применение ИДВ, сенсоры которых устанавливаются непосредственно на объекте контроля, позволяет вовремя отслеживать моменты, когда износ его механизмов превысит максимально допустимый уровень, выявлять наличие дефектов и неполадок в ходе работы, определять источники повышенного уровня вибрационного шума. На основании своевременно доставленной от датчиков информации удается не только объективно судить о состоянии контролируемого оборудования, но и составлять прогноз развития ситуации с целью выявления его нештатных, предаварийных режимов работы, своевременно информируя об этом обслуживающий персонал. Современные ИДВ предполагают наличие в своем составе микропроцессорного управления, что позволяет проводить в процессе инициализации их удаленную настройку на соответствующий метод спектральной обработки акустических сигналов, например на метод прямого спектра или на метод спектра огибающей, или на метод ударных импульсов. При этом выбор метода зависит от параметров спектра контролируемых акустических сигналов (частотный диапазон может быть задан в пределах от нескольких герц до нескольких десятков килогерц), от заданных временных и амплитудных пределов измерения, требований к точности получаемых результатов, от количества, места и способа многоканального съема информации с объекта контроля, от используемых при этом аппаратных средств аналого-цифрового преобразования, уровня стационарных и случайных шумов. Кроме того, задачу акустического обнаружения, локализации и идентификации дефекта на объекте, в котором существует несколько источников вибрации, невозможно решить без коррелирования процессов обработки сигналов на текущем ИДВ с процессами обработки, протекающими в соседних ИДВ, установленных на том же объекте контроля и имеющих смежные с текущим модулем зоны ответственности. Распределенные межмодульные взаимодействия выполняются с целью подавления случайных помех, выделения спектральных характеристик вибрационного шума, порождаемого дефектами в контролируемом объекте, с целью локализации дефектов на месте, локализации и отсечения помех, формируемых оборудованием, внешним по отношению к контролируемому. Данные об обнаруженных таким образом изменениях в спектрах акустических сигналов, контролируемых «коллективом» ИДВ, формируются в пакеты и регулярно отправляются в управляющую ЭВМ, где и производится окончательная обработка и составление прогноза развития нештатной ситуации с указанием наиболее вероятной причины ее появления. Причем, по мере развития нештатной ситуации, нарастания акустических шумов, порождаемых дефектами, объем передаваемых данных будет, как прави- ло, увеличиваться. Так, если при нормальном функционировании оборудования, в условиях отсутствия дефектов, объем определяется несколькими сотнями битов в секунду, то уже при возникновении дефектов, порождающих дополнительные спектры вибросигналов, информационный трафик возрастает в десятки, сотни, а то и в тысячи раз. Следовательно, оборудование связи должно иметь достаточную пропускную способность, адаптивную к указанной специфике изменения трафика. Как показывает анализ существующих разработок, например в области диагностики подшипников качения, пропускная способность используемых каналов связи должна быть не менее 200-300 кБод при типовом количестве точек съема контрольной информации, равном 15-20. Кроме того, с учетом специфики применения оборудование связи должно быть ориентировано на реализацию помехоустойчивого протокола связи. Все вышесказанное указывает на неприемлемость использования в качестве средства связи HART-протокола, базирующегося на стандарте Bell 202, и промышленных сетей на его основе, широко распространенных в настоящее время, для организации интеллектуальных датчиков в сетевые объединения. С одной стороны, протокол не может быть использован ввиду его низкой пропускной способности (1 200-2 200 Бод), с другой - его ориентация на сегменты с централизованным управлением приводит к невозможности организации быстрого обмена сообщениями между ИДВ. Обладающий достаточной пропускной способностью двухпроводной приборный интерфейс I2C также не может быть использован для связи ИДВ ввиду его слабой помехоустойчивости и ориентации на применение в локальных сетях с жестко централизованным управлением. Использование же таких промышленных сетей, как EtherNet, приводит к неоправданному увеличению стоимости и сложности оборудования ИДВ, в том числе в части программной поддержки протоколов обмена. Наличие в этих сетях ситуаций, связанных с потерей пакетов при возникновении в канале перегрузок, также явилось фактором, указывающим на неприемлемость использования платформы для построения подсистемы связи ИДВ. Проведенный анализ действующих промышленных сетей показал, что наиболее подходящим по технико-экономическим показателям является стандарт ISO/IS 11898, регламентирующий совместно со спецификациями 2.0А и 2.0В фирмы Bosch протоколы физического и логического каналов связи. Краткий обзор по техническим характеристикам промышленной CAN-сети приведен в табл.1. Таблица 1 № Параметр Значение параметра (характеристики) СА1Ч-сети 1 Топология Шина (моноканал) с терминаторами на концах 2 Длина шины Типовая — 40м при скорости передачи 1МБод, может быть увеличена до 10 000 м при уменьшении скорости передачи до 5 кБод 3 Физическая среда передачи Витая пара, силовая сеть, радиоканал, оптоволокно, ИК-канал 4 Скорость передачи Стандартизованная - максимум 1 Мбод при длине 40м, возможно - до 1,6 Мбод при длине 10м 5 Режим передачи Последовательная асинхронная передача данных, возможность МиШМаз1ег, групповая передача, ^^-кодирование с битстаффингом Окончание табл. 1 6 Доступ к шине Метод CSMA/CA (Carrier Sense Multiple Access/ Collision Arbitration - множественный доступ с обнаружением несущей / арбитраж коллизий), захват шины через приоритет фрейма, встроенный арбитраж на битовом уровне, недеструктивный алгоритм 7 Тип выхода передачи В соответствии с ISO/IS 11898 8 Число узлов Неограничено (теоретически), до 127 на сегменте (практически), простота подключения и отключения (технология plug&play) 9 Наличие Real-Time Зависит от максимально допустимой задержки для сообщения с высоким приоритетом, реально менее 120 мкс для скорости в 1 МБод 10 Надежность Обеспечивается через обнаружение, обработку, локализацию ошибки. Расстояние Хемминга равно 6. Одна необна-руживаемая ошибка за 1000 лет. Высокий иммунитет к электромагнитным помехам 11 Обнаружение ошибки Каждый CAN-контроллер выполняет мониторинг своего передатчика и всех приемников, 15-битовая контрольная сумма CRC, все CAN-узлы участвуют в проверке выполнения битстаффинга и целостности фрейма 12 Обработка ошибки Все CAN-узлы непосредственно участвуют в подтверждении правильности приема фрейма и маркировке неправильного фрейма 13 Локализация ошибки Различаются ситуации между фиксированными ошибками и временной ошибкой(помеха). При обнаружении фиксированной ошибки узел автоматически само отключается от канала. Возможно автоматическое подключение 14 Протокол верхнего (7-го) уровня CAL, CAN-open, Device-Net, SDS, CAN kingdom, SeleCAN, SAE J1939 15 Протокол нижних (2- и 1-го)уровней ISO 11898, ISO 11519-2, SAE J2284, SAE J2411 16 Область применения Транспорт, промышленная автоматика, робототехника, медицина, авиация, морской транспорт, военная техника, космические станции и спутники 17 Аппаратная поддержка Микроконтроллеры фирм Motorola, Philips, Siemens, NEC, MicroChip, Mitsubishi Electric, Intel, Fujitsu, Toshiba, ST Microelectronics, Thomson, Texas Instruments, Hitachi, Atmel При этом к основным преимуществами стандарта следует отнести: > Ориентацию протокола на различные среды передачи данных такие, как экранированная витая пара, коаксиальный кабель, оптоволоконные, ИК- и радиоканалы, силовые линии электропередачи. > Поддержку высоконадежного мультимастерного алгоритма передачи и обработки ошибок, поддержку механизма, позволяющего отключать удаленный узел и тем самым не допускать блокирование сети посредством передач ошибочных сообщений. > Использование широковещательного способа передачи сообщений, мультима-стерного доступа к шине, что позволяет реализовать глобальные системные часы реального времени, выполнять по ним точную синхронизацию процессов в различных ИДВ. > Поддержка событийного управления прикладными процессами в CAN-узле. Благодаря поддержке широковещательного режима передачи сообщений, в котором все СА^узлы слушают все сообщения, проходящие по сети, и сами принимают решение по их обработке, становится возможным организовать в ИДВ программное обеспечение, управляемое по событиям, что, в целом, повышает общую реакцию системы, ее живучесть при выходе из строя какого-либо из ИДВ. > Реализацию механизма гарантированной доставки сообщений. Используемый в протоколе метод арбитража позволяет гарантировать в сети доставку сообщения абонентам и исключает его потерю из-за вынужденных откатов в передаче при случайном наложении передаваемых пакетов друг на друга в виду попытки активизации обмена сразу несколькими источниками, как это имеет место в EtherNet. Кроме того, не мало важными являются малые габариты, низкая стоимость аппаратных средств связи, в настоящее время применяемых для физического построения промышленной СА№сети. Наличие в составе ИДВ микроконтроллера обработки вибросигналов позволяет включить в состав модуля такие интеллектуальные программно управляемые средства как микроконтроллер СА№протокола с прямым доступом со стороны ведущего в его внутреннюю память, что упрощает механизм управления обменом с соседними ИДВ, с управляющей ЭВМ. При этом следует разделить функции управления сетью между обоими микроконтроллерами. При этом на контроллер сети (CAN-микроконтроллер) следует возложить функции непосредственного управления обменом сообщениями по каналу, распознавания идентификатора, арбитража шины, отсеивания ложных либо «чужих» сообщений, поддержки механизма «горячего» подключения к сети связи; обнаружения, локализации, а в некоторых случаях и устранения ошибок в сообщениях, передаваемых по сети; функции самодиагностики. Распознавание же полученных от сети команд управления, принятие решения по их выполнению и, собственно, само их выполнение возложено на ведущий микроконтроллер модуля. С учетом перспектив развития стандарта на CAN-микроконтроллер также следует возложить функцию сжатия и восстановления передаваемых сообщений, что позволит снизить трафик сети в условиях лавинного нарастания аварийной ситуации. Следует отметить, что в настоящее время, промышленный CAN-микроконтроллер не только аппаратно поддерживает все основные функции логического канала связи, регламентированные указанными выше спецификациями, но и требует минимальных затрат для согласования с физическими каналами связи. Установка дополнительных дифференциальных приемопередатчиков, тип которых определяется используемым физическим протоколом связи, решает проблему согласования микроконтроллера с физической средой передачи сигналов. С целью повышения надежности линии связи предлагается использовать CAN-микроконтроллер с двумя реализованными на кристалле каналами связи. Наличие резервной линии передачи позволяет увеличить надежность не только передающего тракта, но и всей системы мониторинга и диагностики в целом. Наличие встроенной буферной оперативной памяти в таком микроконтроллере позволяет минимизировать аппа- ратные затраты и отказаться от внешних модулей памяти, что очень важно в условиях действия высокого фона помех, требований к минимальным габаритам. К сетевым функциям ведущего микроконтроллера следует отнести функцию инициализации CAN-микроконтроллера, формирования и загрузки в него начальных идентификаторов, других параметров обмена, а затем, перенастройки микроконтроллера после получения конфигурационного пакета. В процессе работы сети на ведущий микроконтроллер возлагаются функции формирования собранных данных в сообщения требуемой длины, текущего управления режимами работы CAN-микроконтроллера, задания кодов подтверждения приема, настройки его регистров внешнего управления, обработки внешних запросов прерывания, в том числе, от CAN-микроконтроллера при приеме/передаче сообщений, при возникновении критических ошибок; функции управления режимами входов/выходов сетевого микроконтроллера, приема, расшифровки и выполнения управляющих, конфигурационных сообщений. На логическом уровне при разработке сети предлагается ориентироваться на общепринятый подход при создании распределенных датчиковых систем с иерархическим управлением. При этом ИДВ должен реагировать посредством сети как минимум на две группы команд: универсальные и специальные. К универсальным следует отнести команды, поддерживаемые ведомыми СА№ узлами и не зависящие от объекта контроля, используемые для считывания стандартных, общих для всех устройств параметров, таких, как тип и производитель устройства, его серийный номер, значение настраиваемого диапазона измерений, заданные единицы измерений, текущие значения измеряемых величин и процент от диапазона, ограничения на применение, задания режима функционирования узла, значений параметров режима, а также общие диагностические команды. Специальные команды зависят от текущей конфигурации ИДВ, назначенной зоны ответственности, типа используемых сенсоров и каналов связи с ними, типа действующего режима и используются для настройки специфических, индивидуальных параметров какого-либо устройства. Например, произвести калибровку нуля и настроить диапазон измерения используемого датчика, считать индивидуальные параметры контролируемого объекта, значения которых записаны во встроенную память микроконтроллера ИДВ; для организации записи/считывания эталонных значений сигналов, свойственных зоне ответственности модуля; для выбора режима и метода спектральной обработки, для управления режимом самодиагностики с учетом установленных индивидуальных параметров узла. В зависимости от типа применяемых датчиков, их зоны ответственности, применяемых алгоритмов преобразования измеряемой информации специальные команды следует разделить на стандартные и специфические. В табл.2 приведен вариант разбиения на группы команд удаленного управления ИДВ со стороны управляющей ЭВМ. Т аблица 2 Универсальные команды Специальные стандартные команды Специальные специфические команды Прочитать производителя и тип устройства Прочитать выборку динамических переменных (количество определяется командой) Прочитать/записать значения коэффициентов настройки программно-аппаратных фильтров, выбрать полосу пропускания Прочитать главную переменную (ГП), единицы измерения Записать константу времени выборки Прочитать/выбрать тип фильтрации Окончание табл. 2 Прочитать текущее значение и процент от диапазона Записать диапазон значений устройства Прочитать/задать частоту дискретизации аналогового сигнала Прочитать до четырех предопределенных переменных Калибровать (установка нуля, диапазона) Прочитать/записать информацию о зоне ответственности, месте установки, об объекте контроля Прочитать/записать 8символьный идентификатор и 16-символьное описание Установить постоянное значение выходного тока Прочитать ограничения на область и диапазоны применения ИДВ Прочитать/записать 32символьное сообщение Выполнить самотестирование Прочитать/записать фактор точности калибровки Прочитать диапазон значений устройства, единицы измерения и время выборки Выполнить перезапуск Калибровать сенсор ИДВ Прочитать серийный номер датчика Установить ГП в нуль Прочитать/записать таблицы поправок к проводимым измерениям Прочитать/записать последний шифр комплекта устройств Записать единицы измерения ГП Прочитать/записать единицы измерения пользователя Записать адрес запроса Установить нулевое значение ЦАП и коэффициент усиления Задать режимы пуска, останова, общего сброса Записать функцию преобразования измеряемой информации Прочитать/задать информацию локального дисплея ИДВ Записать серийный номер датчика Выполнить внутренний тест Прочитать/записать установки динамических переменных Прочитать результаты тестирования Команды сетевого взаимодействия регламентируются выбранным логическим протоколом связи и здесь не приводятся. Как уже было отмечено, для достижения безопасности передачи данных, в каждом узле CAN-сети необходимо реализовать средства самоконтроля, обнаружения ошибок и уведомления об их возникновении. При этом искаженные кадры передаваемых сообщений могут быть помечены любым узлом, обнаружившим ошибку. Такие кадры прерываются и должны быть автоматически переданы заново. Время восстановления от момента обнаружения ошибки до момента начала следующего кадра в большинстве случаев должно быть жестко регламентировано. Особо следует отметить, что узел CAN должен быть способен отличить короткие неполадки от постоянных отказов. Дефектный узел должен самоотключиться от CAN-сети. Последовательная линия связи CAN является шиной, к которой теоретически может быть подключено любое количество узлов. Фактически общее число узлов будет ограничено временной задержкой и (или) электрической нагрузкой на линии шины и, как правило, составляет не более сотни узлов на расстоянии до 40 м при скорости передачи до 1 MБод, что вполне достаточно для построения локального звена системы мониторинга и диагностики. Расширение же системы следует предусматривать за счет введе- ния в ее состав специальных коммуникаторов (шлюзов), оговоренных стандартом, и введения нового уровня иерархии связи и управления. Таким образом, подсистему связи интеллектуальных датчиков вибрации предлагается строить, применяя микроконтроллерный принцип организации интерфейса с ориентацией на стандарт CAN-сети с децентрализацией управления между узлами на уровне одного локального звена многоуровневой системы мониторинга и диагностики. Применение неразрушаюшего алгоритма доступа к каналу связи совместно с аппаратным арбитражем и присвоением формируемым сообщениям уникальных идентификаторов, использование встроенного механизма обнаружения и локализации ошибки в процессе обмена данными с возможностью организации повтора передачи сбойных фреймов, аппаратное дублирование помехоустойчивых физических каналов связи, обладающих достаточным запасом пропускной способности, - все это, в совокупности, обеспечит гарантированную и своевременную доставку информации абонентам сети при коллективной обработке данных. ]]></text>
</doc>
