<doc>
  <source auto="true" type="str" verify="true"><![CDATA[https://cyberleninka.ru/article/n/razrabotka-modulya-razmescheniya-uchebno-issledovatelskoy-sapr-na-baze-sapr-kicad]]></source>
  <category auto="true" type="str" verify="true"><![CDATA[Автоматика]]></category>
  <author auto="true" type="list" verify="true">
    <item type="str"><![CDATA[Литвиненко В.А.]]></item>
    <item type="str"><![CDATA[Ховансков С.А.]]></item>
    <item type="str"><![CDATA[Рябов О.В.]]></item>
    <item type="str"><![CDATA[Платонов В.А.]]></item>
  </author>
  <title auto="true" type="str" verify="true"><![CDATA[Разработка модуля размещения учебно-исследовательской САПР на базе САПР KiCad]]></title>
  <keywords auto="true" type="list" verify="true">
    <item type="str"><![CDATA[АВТОМАТИЗАЦИЯ ПРОЕКТИРОВАНИЯ]]></item>
    <item type="str"><![CDATA[ПЕЧАТНАЯ ПЛАТА]]></item>
    <item type="str"><![CDATA[РАЗМЕЩЕНИЕ]]></item>
    <item type="str"><![CDATA[ОТКРЫТОЕ ПРОГРАММНОЕ ОБЕСПЕЧЕНИЕ]]></item>
    <item type="str"><![CDATA[УЧЕБНО-ИССЛЕДОВАТЕЛЬСКАЯ САПР]]></item>
    <item type="str"><![CDATA[ОБЪЕКТНО-ОРИЕНТИРОВАННОЕ ПРОГРАММИРОВАНИЕ]]></item>
    <item type="str"><![CDATA[КОНВЕРТИРОВАНИЕ ДАННЫХ]]></item>
    <item type="str"><![CDATA[ЕDUCATIONAL RESEARCH CAD]]></item>
  </keywords>
  <annotation auto="true" type="str" verify="true"><![CDATA[Рассматриваются результаты разработки модуля размещения учебноисследовательской САПР на базе открытой промышленной САПР KiCad, распространяемой по лицензии GPL. Приводится формат файла описания данных САПР KiCad. Рассмотрены структура учебно-исследовательской САПР на базе САПР KiCad и состав разработанного класса PCB, предназначенного для конвертации данных]]></annotation>
  <text auto="true" type="str" verify="true"><![CDATA[Введение. Эффективная подготовка специалистов в области автоматизированного конструирования ЭВА требует использования в учебном процессе учебноисследовательских САПР на базе промышленных САПР с открытыми программным, математическим и другими видами обеспечений, так называемых, открытых САПР. Открытость программного обеспечения - это, прежде всего, открытость , . Работа с открытой САПР позволяет познакомиться со структурой программного обеспечения, исходным кодом программных модулей, организацией взаимодействия программных модулей различных проектных процедур, структурой и организацией файлов и т.д. Кроме того, использование форматов входных и выходных данных отдельных проектных процедур открытых промышленных САПР позволяет исследовать в учебных и научных целях различные методы и алгоритмы проектных процедур и операций и при этом использовать все возможности открытой промышленной САПР - от использования редактора схем, до объемного моделирования печатной платы. Таким требованиям отвечает промышленная САПР KiCad [1, 2]. САПР KiCad. Knowledge Infrastructure for Collaborative Product Development (KiCad) - это кросс-платформенный, распространяемый по лицензии GPL программный комплекс класса EDA с открытыми исходными текстами, предназначенный для разработки электрических схем, печатных плат, гибридных интегральных , . KiCad GPL , использовать. При этом KiCad поддерживаются операционные системы Linux, * Работа выполнена при поддержке: РФФИ (гранты № 06-01-00272), РНП 2.1.2.3193, РНП 2.1.2.2238, г/б № Т.12.8.08. Windows, FreeBSD и Solaris. Для многих библиотечных компонентов разработаны 3D модели, созданные в Wings3D. KiCad включает в себя средства, позволяющие создавать описания радиоэлектронных компонентов (РЭК), электрических принципиальных схем, задавать форму печатной платы, расставлять РЭК на плате как вручную, так и автомати, . выданы на принтер, плоттер, фотошаблон. По своей структуре KiCad напоминает САПР P-CAD [3] - известную программную систему аналогичного назначения: это набор из четырех автономных , -вания. Общая структура САПР KiCad показана на рис. 1. Модуль Eeschema предназанчен для создания электронной схемы; pcbnew -для создания чертежа печатной платы; gerbview - для просмотра документов, выводимых на фотоплоттер; Cvpcb - для выбора из библиотеки стандартных компо-, . К модулям можно обращаться как независимо друг от друга, так и из цен-Ki ad, . Модуль Eeschema создает простые и многоуровневые схемы, проверяет их корректность с помощью функции Electrical Rules Check (ERC) и составляет список соединений (netlist), который можно использовать как в модуле KiCad pcbnew, так и в известной программе расчета электронных схем P-Spice. Модуль Eeschema обеспечивает быстрый прямой доступ к документации электронных компонентов, хранящихся в библиотеке. Редактор этих компонентов тоже вызывается из этого модуля. Библиотека, поставляемая в комплекте с KiCad, насчитывает около 30 готовых компонентов с описаниями. Кроме того, к этой программной системе прилагается 7 демонстрационных электронных схем и чертежей печатных плат. Рис. 1. Структура САПР KiCad Редактор печатных плат pcbnew позволяет создавать чертежи многослойных (до 16 проводящих и 12 технических слоев) плат. Под техническими слоями подразумеваются такие, как слой маркировки, слой защиты и др. Затем pcbnew создает файлы, необходимые для построения печатной платы (GERBER-файлы для фото). можно использовать лазерные принтеры PostScript. Модуль pcbnew позволяет также просматривать объемную модель готовой платы вместе с установленными на нее электронными компонентами. Для создания трехмерной модели используется язык OpenGL. К модулям Eeschema и pcbnew прилагается менеджер библиотек, редакторы компонентов и проекций. Элементы библиотеки снабжаются сопроводительной документацией (поставляемые в комплекте с KiCad в формате PDF), а также ключевыми словами для облегчения их поиска в базе данных. Файлы описания данных САПР KiCad. KiCad использует в своей работе три типа файлов: 1) файлы описания схем с расширением *.sch (Eeschema); 2) файлы библиотек с расширением *.lib (Eeschema); 3) файлы описания печатных плат *.brd (pcbnew). При разработке модуля размещения УИ САПР интерес, прежде всего, представляют файлы описания печатных плат с расширением *.brd, который содержит всю необходимую информацию не только о элементах, размещенных на печатной , цепей, к которым подсоединяются данные выводы. Струтура формата данных файла описания печатных плат с расширением *.brd показана на рис. 2. Первая строка этого файла содержит информацию о создавшей файл программе и дату создания, например: PCBNEW-BOARD Version 0 date 5/1/2005-14:45:23. Далее следуют описания следующих бло- : GENERAL - содержит основную информации«) о плате: число слоев, число цепей, размеры платы, число элементов и т.д.; SHEETDESCR - содержит информацию ( ), , создания схемы и т.д.; SETUP - содержит различную конфигу-: -, , : , -, , размер шрифта и п.р.; EQUIPOT - содержит список цепей (netlist); MODULE - содержит информацию об , : , , , содержит секции PAD и SHAPE3D; PAD - содержит информацию о ножке , : ( EQUIPOT), , модуля и т.д.; SHAPE3D - - Рис. 2. Формат данных обходимую для трехмерного изображения мо- файла *.brd дуля' DRAWSEGMENT - ; TEXTPCB - содержит текстовую информации, расположенную на схеме; TRACK - ; Формат данных ПП САПР KiCad GENERAL SHEETDESCR SETUP EQUIPOT MODULE SHAPE3D DRAWSEGMENT TEXTPCB TRACK ZONE - содержит зоны сплошной металлизации платы с указанием слоя и толщины. Таким образом, файлы описания печатных плат с расширением *.brd - обычные текстовые файлы формата ASCII с определенной структурой данных, что позволяет использовать их для разработки программного обеспечения учебно. Структура УИ САПР. Структура УИ САПР на базе САПР KiCad с модулем размещения показана на рис. 3. Пользователь УИ САПР самостоятельно создает принципиальную электриче- KiCad - ное размещение с указанием границ печатной платы. После этого пользователь должен сохранить полученные результаты в виде проекта печатной платы. Следующий шаг в работе модуля размещения УИ САПР - это загрузка данных из файла с расширением *.brd, полученного в ходе предыдущей работы и сохраненного в проекте создаваемой платы. Эти данные необходимо не только загрузить в , , -пользоваться в программном обеспечении учебно-исследовательской САПР. Эту функцию выполняет входной конвертор данных. Рис. 3. Структура УИ САПР на базе САПР KiCad После конвертации данных пользователь может произвести размещение элементов печатной платы одним из алгоритмов, которые имеются в библиотеке. Для этого ему необходимо вызвать функцию, соотвествующую выбранному алгоритму размещения. Затем выходной конвертор данных преобразует полученную информацию о размещении элементов и записывает ее в соответствующие структуры файла описания печатной платы с расширением *.brd. Программное обеспечение. Разработано программное обеспечение (ПО) для модуля размещения УИ САПР с учетом формата данных, получаемых от системы KiCAD, с использованием объектно-ориентированного программирования в среде C++ Builder 6. Базовым элементом ПО является класс PCB. Данный класс содержит несколько вложенных классов, описывающих основные элементы платы. Внутренняя структура базового класса показана на рис. 4. В таблице приведено описание классов, которые содержит базовый класс PCB, с указанием переменных, входящих в каждый конкретный класс. Рис. 4. Структура базового класса РСВ Таблица Класс Объявляет Module Переменные, содержащие информацию о названии элементов, находящихся на схеме, координаты их положения, графическое представление и.т.д. _PAD , (модуля): название вывода, форму, диаметр, номер цепи, к которой он подсоединен, положение относительно центра элемента _AT Переменные, содержащие атрибуты выводов модуля _DR , вывода _NE Номер электрической цепи к которой подключен конкретный вывод _PO Координаты положения вывода относительно центра модуля _SH Внутреннее имя вывода и его геометрическая форма _DI Переменные, содержащие координаты границ печатной платы. _SHEET , , на которых отображена принципиальная схема платы Size Переменные, содержащие информацию о координатной сетке, используемой при создании и размещении схемы. _UserGridSize Переменные, содержащие информацию о пользовательских настройках координатной сетки. _PO Переменные, содержащие информацию о координатах центра расположения модуля. POS_PLACE , , которые разбита площадь печатной платы и название модуля, который находится в каждом конкретном посадочном месте. _DS Переменные, описывающие кривые, которыми отрисовываются элементы на печатной плате. _OP Переменные, указывающие угол поворота модуля, используемый при авто-рюмещении. PCB , . KiCAD внутреннее представление данных УИ САПР служат функция чтения данных «READ» и функция записи в файл «OUT». Особое внимание следует уделить классу POS_PLACE, описывающего поня-. KiCAD - ной платы на посадочные места. Автоматическое размещение производиться непрерывном методом по принципу группировки однотипных элементов на минимально близкое расстояние друг от друга. Однако, в ходе разработки ПО, более удобном и эффективным способом размещения элементов на плате был принят способ деления коммутационного поля (т.е. площади печатной платы) на четко ( ). должно быть больше или равно количеству элементов на плате. За разбиение печатной платы на посадочные места и формирование списка этих мест с указанием координат центра и отвечают функции класса POS_PLACE. Библиотека алгоритмов размещения включает в себя последовательный эвристический алгоритм; вероятностный алгоритм; генетический алгоритм; итерационный алгоритм парных перстановок. Алгоритмы размещения элементов реализова- (DLL). использования библиотеки программных модулей алгоритмов размещения частично рассмотрены в [4, 5]. ]]></text>
</doc>
