<doc>
  <source auto="true" type="str" verify="true"><![CDATA[https://cyberleninka.ru/article/n/setevoy-uchebno-issledovatelskiy-stend]]></source>
  <category auto="true" type="str" verify="true"><![CDATA[Автоматика]]></category>
  <author auto="true" type="list" verify="true">
    <item type="str"><![CDATA[Пьявченко О.Н.]]></item>
    <item type="str"><![CDATA[Педошенко А.М.]]></item>
    <item type="str"><![CDATA[Пцарева М.М.]]></item>
  </author>
  <title auto="true" type="str" verify="true"><![CDATA[Сетевой учебно-исследовательский стенд]]></title>
  <keywords auto="true" type="list" verify="true"/>
  <annotation auto="true" type="str" verify="true"><![CDATA[]]></annotation>
  <text auto="true" type="str" verify="true"><![CDATA[Усложнение вновь создаваемых технических объектов, повышение требований к качеству, экономичности и безопасности их функционирования, необходимость решения проблем предотвращения техногенных аварий и катастроф, устранение негативного влияния человеческого фактора делают актуальным создание нового поколения интеллектуальных систем мониторинга, диагностики и управления. Мониторинг динамического объекта (процесса) - это целенаправленное определение его состояния на основе информации о параметрах, значениях входных, выходных и других переменных и оценки соответствия этого состояния требованиям (ограничениям), имеющим место в контрольное время. Исходя из этого, можно предположить, что будут строиться системы мониторинга не только автономные, но и встроенные в системы диагностики и управления. Среди различных систем мониторинга достойное место займут распределенные интеллектуальные системы [1], которые будут иметь следующие преимущества и особенности: - являться высокореактивными и высокочувствительными к изменениям состояния объекта мониторинга (ОМ); - обеспечивать высокий уровень полноты мониторинга методом контроля в пространстве состояний; - реализовать опережающий прогноз состояния ОМ в темпе реального времени; - иметь высокую производительность, благодаря развитой программноаппаратной поддержке методов мониторинга; - обеспечивать высокую точность измерений и функциональную полноту обработки переменных физических величин в непосредственной близости к ОМ; - отличаться незначительным временем запаздывания формирования результатов мониторинга на шаге. Перспективные распределенные интеллектуальные системы мониторинга (РИСМ) ближайшего поколения будут строиться в виде иерархических микрокомпьютерных сетей с программируемой конфигурацией, узлами которых являются локальные микрокомпьютерные системы, такие как специализированные микропроцессорные и микроконтроллерные системы нижнего уровня, промышленные функциональные компьютеры среднего уровня и АРМ верхнего уровня, построенные на основе персональных компьютеров. Распределенные вычисления и интеллектуальная обработка информации выполняются в таких системах на каждом уровне иерархии. Каждый образец РИСМ является результатом трудоемких исследований и разработок математических методов и моделей, алгоритмического, программного и аппаратного обеспечения. Для подготовки разработчиков и создания условий для проведения плодотворных исследований и разработок нужны развитые программные и аппаратные инструментальные средства. Среди этих средств важное место отводится стендам полунатурного моделирования, на которых в лабораторных условиях воспроизводится функционирование в реальном масштабе времени динамических объектов и систем их наблюдения и управления. Строятся стенды в виде объединений персональных и специализированных компьютеров, реализующих математические модели, физических моделей и штатной аппаратуры. В настоящей работе презентуется сетевой учебно-исследовательский стенд (СУИС), предназначенный для подготовки специалистов и проведения исследований и разработок алгоритмов, программ и аппаратных решений в области построения распределенных интеллектуальных систем мониторинга, диагностики и управления. СУИС создан на кафедре "Микропроцессорные системы" ТРТУ. На настоящем этапе разработок он ориентирован на сбор, обработку и отображение в реальном времени аналоговых сигналов датчиков физических величин (температуры, давления, вибрации и т.п.) для мониторинга многопараметрических технических объектов. СУИС представляет собой распределенную микрокомпьютерную систему, построенную на основе интеллектуальных датчиков - измерителей сигналов (ИДИС) [2], и обеспечивает: - съем сигналов с датчиков (первичных преобразователей), расположенных непосредственно на исследуемом объекте; - аналоговую и интеллектуальную цифровую обработку сигналов, поступающих в ИДИС; - сбор с помощью цифровой промышленной сети [3, 4, 5] результатов обработки сигналов всеми используемыми ИДИС; - анализ и интегральную оценку состояния объекта мониторинга; - поддержку формирования локальных управляющих решений; - протоколирование и отображение принимаемой информации в реальном масштабе времени. В основу архитектуры СУИС положены следующие особенности: - двухуровневая организация, в которой на нижнем уровне в ИДИС осуществляется сбор и первичная обработка сигналов, поступающих от объекта мониторинга, преобразование единиц измерений, вычисление интегральных параметров, например, среднеквадратических значений (СКЗ) сигналов вибрации, на верхнем уровне - сбор данных, сформированных в ИДИС, их дальнейшая обработка, протоколирование и отображение в реальном масштабе времени; - многоканальная обработка сигналов; - приближение цифровой обработки к объекту; - ориентация на промышленную сеть RS-485 и протокол MODBUS [6]; - функционирование в реальном масштабе времени под управлением OC QNX; - модульность, развиваемость, экономичность. В состав СУИС входят следующие компоненты (рис. 1): - КОНЦЕНТРАТОР, который выполняет функции сбора данных от интеллектуальных датчиков нижнего уровня. КОНЦЕНТРАТОР реализован на персональном компьютере (ПК); - от одного до четырех интеллектуальных датчиков - измерителей сигналов -ИДИС; - цифровая промышленная сеть RS-485. КОНЦЕНТРАТОР осуществляет обмен информацией с интеллектуальными датчиками через сеть RS-485 по протоколу MODBUS/RTU. В КОНЦЕНТРАТОРЕ в соответствии с настройками и командами оператора осуществляется сбор данных от ИДИС, отображение принимаемых данных, дальнейшая обработка и протоколирование. ПК укомплектован дисплеем, клавиатурой, манипулятором "мышь" и устройством печати. Рис. 1. Структура сетевого учебно-исследовательского стенда Каждый ИДИСі содержит по 4 канала (і=1, 2, 3, 4), к которым могут подключаться от 1 до 4-х первичных преобразователей физических величин (давления / вибросигнала / температуры и др.) Sij (j=1, 2, 3. 4). Структура ИДИС1 включает в себя: - управляемые фильтры для каждого канала CFil, CFi2, CFi3, CFi4; - управляемые усилители для каждого канала CAil, CAi2, CAi3, CAi4; - микроконтроллер MSPi (MSP430 [7]) со встроенным аналоговым мультиплексором - Mi и аналого-цифровым преобразователем - ADCi; - интерфейс RS-485. На основании анализа промышленных сетей в качестве информационного протокола для СУИС выбран один из наиболее широко используемых на практике - протокол MODBUS/RTU. Выбор протокола осуществлен по оптимальному соотношению следующих параметров: - стоимости требуемого оборудования; - возможностям обеспечения точной временной циклограммы обмена; - простоте логической структуры; - соответствия уровню решаемых задач. Использование для централизованного сбора от ИДИС обработанных данных не оригинальных частных протоколов, а стандартных интерфейсов, обеспечивает преемственность, независимость от конкретной реализации аппаратной части СУИС. Программное обеспечение СУИС рассчитано на взаимодействие с разнообразными составляющими. При этом потребуются настройки и дополнения отдельных частей, но не полная переделка системы. Такой подход увеличивает жизненный цикл, что при быстрой смене версий и инструментальных средств обеспечивает защиту инвестиций. Предложенная система обеспечивает быстрый и фиксировананный по времени цикл информационного обмена, гарантированную доставку сетевых сообщений, возможность независимого функционирования системы верхнего уровня (обеспечивая, в том числе, поддержку SCADA-систем). Программное обеспечение СУИС включает в себя системное и прикладное ПО КОНЦЕНТРАТОРА и прикладное ПО ИДИС. В качестве системного ПО КОНЦЕНТРАТОРА используется ОС реального времени QNX [8], графическое ядро Photon, сетевая поддержка TCP/IP. Выбор операционной системы QNX осуществлен на основании следующих требований: - строгое соблюдение циклограмм опроса и недопустимость потери данных - предсказуемость системы управления; - простые механизмы интерфейса с оборудованием, для обеспечения быстрой разработки драйверов необходимых устройств; - ограниченный объем ОС, для возможности встраивания в бездисковые устройства с ограниченными ресурсами (например, при использовании DiskOn-Chip); - поддержка разнообразных процессов, имеющих различную степень важности (отсюда - желательно иметь многозадачную среду с повышенной отказоустойчивостью, с возможностью управления приоритетами процессов, каждый из которых выполняется в своем собственном защищенном адресном пространстве ); - встроенная поддержка негромоздких механизмов сетевого взаимодействия, что позволит в перспективе развить комплекс в сетевую распределенную систему. ОС QNX является идеальной операционной системой для приложений, работающих в режиме реального времени. ОС QNX удовлетворяет перечисленным выше требованиям. В ней реализован многозадачный режим, приоритетно- управляемое планирование и быстрое переключение контекста. Настройка системы QNX может быть выполнена от минимальной (ядро и несколько небольших модулей) до полной сетевой конфигурации (обслуживание сотен пользователей). Это позволяет использовать только те ресурсы, которые необходимы. Применение ОС QNX позволило организовать прикладное ПО КОНЦЕНТРАТОРА в виде совокупности взаимодействующих процессов с возможностью управления их приоритетами и обмена между ними сообщениями. Программы ПО КОНЦЕНТРАТОРА разработаны в системе программирования Photon Application Builder (графический интерфейс) и на языке С (компилятор Watcom C 10.6). Прикладное ПО КОНЦЕНТРАТОРА выполняет настройку СУИС на заданные параметры работы, сбор данных по сети RS-485, синхронизацию обменов с ИДИС1 - ИДИС4, отображение и протоколирование принимаемых данных в реальном масштабе времени. На рис.2 представлен пример пользовательского интерфейса КОНЦЕНТРАТОРА, который включает окно настройки и управления работой стенда и окно вывода графика информации, принимаемой от одного из ИДИС. Рис. 2. Пользовательский интерфейс СУИС В режиме настройки параметров ИДИС пользователь может задать значения коэффициентов усиления управляемых усилителей, коэффициентов фильтра для каждого канала, интервал запусков преобразований АЦП, число выборок, используемых для обработки данных (например, вычисления СКЗ). Изменив значения, пользователь должен щелкнуть мышью по кнопке "Запись". При этом программа формирует и передает управляющее сообщение в процесс сбора данных, который, в свою очередь, выполнит передачу в заданный ИДИС значений параметров настройки с помощью функции 10Ь протокола MODBUS/RTU. Пользователь может изменить конфигурацию СУИС - запретить или разрешить работу отдельных ИДИС и отдельных каналов. При этом в режиме циклического сбора данных запрещенные ИДИС и каналы не будут опрашиваться, а графики для них не будут отображаться. Прикладное ПО ИДИС предназначено для настройки ИДИС на заданные режимы работы, управления АЦП, фильтрами и усилителями, обработки принимаемых аналоговых сигналов (например, вычисления среднеквадратических значений) и передачу обработанных данных по запросу в КОНЦЕНТРАТОР через промышленную сеть RS-485 по протоколу MODBUS/RTU. Программы ПО ИДИС разработаны для микроконтроллера MSP430 на языке С и языке Ассемблера с использованием системы программирования и отладки программ для MSP 430 - IAR С. Взаимодействие КОНЦЕНТРАТОРА с ИДИС по сети RS-485 выполняется по протоколу MODBUS/RTU. При этом КОНЦЕНТРАТОР выполняет функции главного узла (Master), а ИДИС 1-4 - подчиненных узлов (Slave). В сети MODBUS инициатором любого взаимодействия по сети всегда является главный узел. Подчиненные узлы ИДИС отвечают только на запросы КОНЦЕНТРАТОРА. ИДИС после получения и анализа команды либо посылает ответное сообщение, либо, если получена групповая команда, выполняет ее и ответного сообщения не посылает. Протокол MODBUS/RTU определяет набор функций и формат сообщений, одинаковый для всех устройств в сети. В программном обеспечении КОНЦЕНТРАТОРА и ИДИС реализованы функции, которые обеспечивают все необходимые в СУИС взаимодействия по сети RS-485. В представляемой версии системы реализуется двухуровневое ПО взаимодействия КОНЦЕНТРАТОРА и ИДИС по сети RS-485: - ПО низкого уровня, обеспечивающее обмен по RS-485; - ПО верхнего уровня, которое выполняет функции протокола MODBUS/RTU. ПО нижнего уровня осуществляет прием/передачу очередного байта данных по RS-485, работает с буферами приема/передачи, подсчитывает и проверяет количество принятых байт, устанавливает необходимые флаги. ПО верхнего уровня реализует подмножество типовых функций протокола MODBUS/RTU - 03h и 10h с алгоритмом вычисления контрольной суммы CRC. Набор реализуемых функций впоследствии может быть расширен. Требования к временным параметрам обмена по сети RS-485 включают в себя требования к циклограмме обменов со стороны программы КОНЦЕНТРАТОРА, к пропускной способности каналов связи, к реактивности ИДИС, возможности многоканальной работы по нескольким сегментам сети. Из всех взаимодействий по сети RS-485 между КОНЦЕНТРАТОРОМ и ИДИС наиболее критичным с позиций временных ограничений является режим сбора данных. Измерение, обработка, передача по сети RS-485 и отображение данных должны выполняться в реальном масштабе времени. Для циклического сбора данных по сети RS-485 может использоваться режим синхронного либо асинхронного чтения данных от используемых датчиков. При этом в обоих случаях выполняется следующая последовательность действий: - запуск сбора данных (инициация запуска программ сбора данных в микроконтроллерах MSPi) в соответствии с заданным в процессе настройки вариантом его конфигурации, синхронизация выполняемых в MSPi программ по времени; - сбор данных - циклически повторяемая процедура АРМ (КОНЦЕНТР А-ТОРА) по сбору данных от всех активных ИДИС (циклограмма работы). Этот цикл завершается либо по команде оператора, либо по истечении заданного времени проведения эксперимента; - останов сбора данных. В случае синхронного сбора данных измеряемые сигналы технического объекта, которые после первичной обработки передаются от ИДИС, должны относиться к одному и тому же моменту времени. Следовательно, сбор данных во всех ИДИС должен начинаться одновременно. Такой постановке задачи соответствует следующий алгоритм взаимодействия КОНЦЕНТРАТОРА и ИДИС на каждом шаге цикла обмена: - КОНЦЕНТРАТОР посылает во все активные ИДИС групповую команду, по которой осуществляется одновременный старт сбора данных во всех активных ИДИС; - КОНЦЕНТРАТОР ожидает интервал времени - DTконц, которое должно быть не меньше, чем максимальное из значений DTi: DTконц > max DTi (i=1, 2, N), где DTi - время накопления - время, которое требуется MSPi на выполнение цикла, включающего измерение (съем, обработку, вычисление СКЗ) и подготовку для передачи одной порции данных. ИДИС после завершения сбора и обработки данных ожидают запроса от КОНЦЕНТРАТОРА на передачу полученных результатов; - по истечении времени DTконц КОНЦЕНТРАТОР последовательно осуществляет передачу запросов и прием данных от каждого ИДИС. Реализация асинхронного алгоритма чтения данных от используемых датчиков предполагает, что каждый ИДИС после своего включения начинает выполнять цикл, который состоит в следующем: - съем данных с датчиков по всем активным каналам; - преобразование аналогового сигнала в цифровую форму; - накопление данных и их обработка; - подготовка данных к передаче в КОНЦЕНТРАТОР. В момент получения запроса на передачу данных от КОНЦЕНТРАТОРА ИДИС прерывается на анализ запроса, формирование ответного сообщения и его передачу. Если по каким-либо причинам запрос от КОНЦЕНТРАТОРА на передачу готовых данных не поступает, на место прежних данных будут записаны новые данные, полученные в следующем цикле работы ИДИС. КОНЦЕНТРАТОР в этом случае не выдает команды одновременного старта, а выполняет только цикл последовательных опросов всех ИДИС с шагом, который определяется поставленными задачами, но не меньшим DTконц. Таким образом, в случае асинхронного обмена данными КОНЦЕНТРАТОР и ИДИС работают независимо, и КОНЦЕНТРАТОР по своему запросу получает от ИДИС всегда самые последние данные. В рассматриваемой версии СУИС по усмотрению пользователя реализуется как синхронный, так и асинхронный алгоритм обмена данными. Такие параметры обмена, как цикл обмена (О^онц) и время ожидания ответа (Timeout) - являются параметрами настройки и могут быть изменены оператором перед сеансом сбора данных. Кроме того, в конфигурационном файле stend.cnf можно задавать базовые адреса регистров каналов ИДИС, с которых считывается информация по запросам от КОНЦЕНТРАТОРА. Системные параметры обмена в данной реализации стенда имеют следующие значения: - скорость обмена по RS-485 - 9600 бод; - количество битов в минимальной посылке данных - 8; - количество стоп-битов, завершающих посылку -1; - режим работы контроля бита четности - 0. СУИС может быть использован для решения многих научноисследовательских задач, например: - отработка схемотехнических решений, необходимых в реальных распределенных системах мониторинга состояния сложных динамических объектов (СДО) достаточно широкого класса и уровней сложности - от систем кондиционирования и систем сигнализации до систем вертолета, космического аппарата, ро-бота-манипулятора и т.п.; - задача замыкания контура управления СДО (анализ предаварийных и аварийных ситуаций, оценки равномерности перегрузок, пиковых перегрузок и т.п.); - совершенствование реальных систем с применением метода "полунатур-ного моделирования" на основе натурного воспроизведения аппаратнопрограммных средств реальных систем управления и дополнения их имитаторами внешней обстановки (подменяя внешние сигналы генераторами тестовых сигналов в реальном масштабе времени). В учебном процессе СУИС предполагается использовать для: - изучения функционирования локальных микрокомпьютерных систем в составе сети на примере современных технических решений, стандартов, задач, алгоритмов; - обучения вопросам создания распределенных микропроцессорных систем; - получения навыков по компоновке, настройке и разработке программ для подобных систем. Дальнейшее развитие СУИС предполагается осуществлять в следующих направлениях: - наращивание аппаратной части до 32 ИДИС и, соответственно, до 128 каналов; - наращивание программной составляющей за счет запуска дополнительных процессов обработки данных в реальном времени; - организация пересылки принимаемых в КОНЦЕНТРАТОР данных по сети (например, Ethernet) в ПК для дополнительной обработки и накопления результатов на дисках большой емкости; - добавления программных средств постобработки принимаемых данных. ]]></text>
</doc>
