<doc>
  <source auto="true" type="str" verify="true"><![CDATA[https://cyberleninka.ru/article/n/promyshlennaya-flesh-pamyat]]></source>
  <category auto="true" type="str" verify="true"><![CDATA[Автоматика]]></category>
  <author auto="true" type="list" verify="true">
    <item type="str"><![CDATA[Бузмаков Анатолий]]></item>
    <item type="str"><![CDATA[Кузьмин Михаил]]></item>
  </author>
  <title auto="true" type="str" verify="true"><![CDATA[Промышленная флэш-память]]></title>
  <keywords auto="true" type="list" verify="true"/>
  <annotation auto="true" type="str" verify="true"><![CDATA[Слово «промышленная» не вполне точно отражает категорию флэш-памяти, которую мы собираемся рассматривать, но, к сожалению, определение «защищенная» уже занято для описания информационный безопасности с помощью аутентификации по отпечаткам пальцев, специальными методами шифрования или ограничением доступа обычным паролем. (Например, «защищенная флэшка» означает внешний накопитель на основе флэш-памяти с интерфейсом USB, в котором используется один или несколько способов информационной защиты.)]]></annotation>
  <text auto="true" type="str" verify="true"><![CDATA[Михаил КУЗЬМИН kma@ts.ru Анатолий БУЗМАКов aib56@ts.ru Слово «промышленная» не вполне точно отражает категорию устройств, которые мы собираемся рассматривать, но, к сожалению, определение «защищенная» уже занято для описания информационный безопасности с помощью аутентификации по отпечаткам пальцев, специальными методами шифрования или ограничением доступа обычным паролем. (Например, «защищенная флэшка» означает внешний накопитель на основе флэш-памяти с интерфейсом USB, в котором используется один или несколько способов информационной защиты.) Введение Однако для применения информационной защиты необходима как минимум сохранность записанной информации. Между тем, многочисленные предложения по восстановлению информации на неисправных флэшках и не менее многочисленные советы по аккуратному использованию этих устройств позволяют предположить, что обычные устройства хранения на основе флэш-технологии не столь уж и надежны, чтобы реально использоваться в промышленной сфере, где обычно применяются специальные защищенные компьютеры. Причем в данном случае определение «защищенные» вполне точно отражает стойкость к внешним воздействующим факторам, включая экстремальные температуры, влажность, нестабильное питание, удары, падения и т. д. Компании-изготовители прекрасно знают, что погоня за дополнительными гигабайтами при снижении цены отрицательно сказывается на надежности любых устройств на основе флэш-памяти (будь то карты памяти или твердотельные накопители). Поэтому в линейке продуктов многих изготовителей можно найти изделия, отмеченные словами Industrial, High-Endurance или Enterprise, то есть промышленные устройства. Попробуем разобраться с особенностями этих устройств и понять, действительно ли нужно платить больше, если в любом магазине электроники можно купить более дешевое изделие в бытовом исполнении. Основы Флэш (Flash) память гораздо ближе по своей природе к постоянным запоминающим устройствам (наиболее известным представителем которых является базовая система ввода/вывода — BIOS — любого персонального компьютера), чем к обычной оперативной памяти этого же компьютера. Стираемые (перезаписываемые) микросхемы памяти «только чтение» (Erasable PROM, EPROM) на основе полевых транзисторов с дополнительным изолированным затвором FG FET (Floating-Gate Field Effect Transistor) известны достаточно давно. Электрическое поле между основным (управляющим, программирующим) затвором (Control Gate) и подложкой (Substrate) может полностью запереть транзистор, то есть за- Схема ячейки флэш-памяти Управляющий затвор (Control Gate) Слой диэлектрика Исток (Source) Сток (Drain) Изолированный 0 Подложка (Substrate) затвор (Floating Gate) Условное графическое обозначение 0—г 0-Г /О-канальныи транзистор (ячейка памяти) ~\—0 /т-канальныи транзистор (ячейка памяти) ~\—0 Рис. 1. Схема и условное графическое обозначение транзистора FG FET крыть канал между истоком (Source) и стоком (Drain), либо полностью открыть транзистор, то есть открыть канал между истоком и стоком (рис. 1) [7]. Поскольку управление транзистором производится электрическим полем, транзисторы такого типа названы полевыми. Транзистор этого типа служит отдельной ячейкой флэш-памяти. Кроме того, не существует никаких различий между истоком и стоком, и поэтому эти транзисторы также называют униполярными. Эффект сохранения заряда в полевых транзисторах можно усилить дополнительным изолированным затвором (Floating Gate), не имеющим внешних выводов и не подключенным к электрическим цепям. Заряд на изолированном затворе препятствует воздействию основного поля, а отсутствие заряда разрешает обычный режим транзистора. Изолированный затвор потому и называется изолированным (а вовсе не «плавающим»), что позволяет сохранять заряд даже при выключенном питании, поэтому память на основе транзисторов FG (MOS)FET является энергонезависимой (nonvolatile). Наличие или отсутствие заряда на изолированном затворе можно интерпретировать как два различных состояния, то есть транзистор может стать ячейкой памяти для хранения одного бита информации. Итак, основной затвор служит для выборки ячейки памяти среди нескольких ячеек, подключенных к одной линии данных (адресация), а заряд или его отсутствие на изолированном затворе определяет состояние ячейки памяти. В прошлом стирание информации во всех ячейках UV-EPROM (память «только чтение» с ультрафиолетовым стиранием) производилось за счет воздействия на изолированные затворы ультрафиолетового освещения через специальное окошко из кварцевого стекла на корпусе микросхемы (рис. 2) [7]. Уменьшение толщины диэлектрика между изолированным затвором и подложкой (истоком) позволило использовать эффект туннельного Программирование "V Стирание о а> -8- Ї аз а) ? 5* £ 5 £ a Затвор Флэш-память NOR Программирование инжекцией 41 горяч их» электронов, стирание — туннельный переход. Затвор Флэш-память №N0 Программирование (напряжение истока, стока и подложки равно О В, а напряжение затвора — 20 В)* и стирание (напряжение истока, стока и подложки равно 20 В, а напряжение затвора — 0 В)* за счет туннельного перехода. * — Для р-канального транзистора Сток f •У / Исток Сток Исток Затвор Сток —— у 1 У-^п Р 0 Подложка J у Подложка 1 у Подложка Рис. 2. Сравнение схем различных типов памяти перехода для снятия заряда с изолированного затвора электрическим способом и реализовать электрически стираемую память «только чтение» EEPROM (Electrically Erasable PROM). Однако все достоинства (и главное из них — энергонезависимость) памяти EEPROM (или E2PROM) перечеркивались слишком большим временем разряда изолированного затвора (что нетрудно понять, поскольку электронам приходится «перескакивать» через слой диэлектрика): в старых микросхемах флэш-памяти на программирование (заряд) уходило менее 1 мс, а на стирание (разряд) — менее 1 с. Устранить этот недостаток позволила простая и понятная идея японца Фуджио Масуока (Fujio Masuoka): программировать изолированные затворы по одному, а стирать — группами (иногда заранее). Эта концепция была названа Flash по аналогии с фотовспышкой при фотосъемке. Название предложено коллегой Масуоки — г-ном Ариизуми (Ariizumi), который был поражен быстротой операции группового стирания. Ячейки (транзисторы) флэш-памяти можно соединить последовательно, в цепочку. В этом случае логическая организация памяти называется NAND (то есть Not AND, или НЕ-И по-русски, однако трудности перевода в свое время не позволили в отечественных публикациях правильно сопоставить иностранное слово хорошо известному термину на русском языке, поэтому и авторам данного описания придется именовать этот тип памяти на английский манер, как принято сегодня). Либо ячейки памяти можно соединить параллельно и получить логическую схему NOR (Not OR, НЕ-ИЛИ). Логическая организация памяти накладывает определенные ограничения на технологию: в архитектуре NOR для программирования обычно используется процесс инжекции «горячих» электронов (hot-electron injection), а для стирания — механизм туннельного перехода Фаулера-Нордхейма (Fowler-Nordheim tunneling). В памяти типа NAND этот туннельный переход электронов используется как для программирования, так и для стирания. Логическая структура флэш-памяти оп- ределяет используемые методы программирования и стирания ячейки. В чистом, без дальнейших усовершенствований виде флэш-память NOR похожа на обычную оперативную память, так как обладает внешним интерфейсом с произвольным доступом по шинам адреса и данных, а память типа NAND больше напоминает дисковый накопитель с блочным доступом. Причем при существенно большей скорости чтения данных память NOR имеет значительно меньшую скорость стирания и несколько меньшую скорость записи в сравнении с NAND. Однако память NOR позволяет исполнять записанный код, а программы из NAND перед исполнением всегда приходится перегружать в оперативную память. Ячейка флэш-памяти NAND имеет значительно меньшие размеры в сравнении с памятью NOR. Между тем, при прочих равных условиях ячейка памяти NOR занимает на кристалле площадь 10F2, а ячейка памяти NAND — 4F2 (рис. 3) [7], Память типа NOR Массив ячеек памяти: BL-0 BL-1 BL-N Память типа NAND Сигналы: WL — выборка слова (Word Line), адресация BL — битовая линия (Bit Line), данные SL — линия источника (Source Line) SS — выборка строки (String Select) GS — выборка потенциала «земли» (Ground Select) План ячейки памяти: 2F 2F 5F 2F Сечение ячейки памяти: Размер ячейки памяти 10F2 Ч-Р-І Размер ячейки памяти 4F2 Рис. 3. Сравнение флэш-памяти NOR и NAND по схеме электрических соединений, занимаемой площади и сечению поэтому теоретически память NAND обладает в 2,5 раза большей емкостью, чем NOR. Хотя первоначально была более распространена память NOR в виде оперативной памяти носимых устройств, сегодня широкое применение получила память NAND в виде карт памяти (SD, CompactFlash или MemoryStick) или твердотельных накопителей (Solid State Drive, SSD). Следующей прогрессивной идеей стал метод хранения на изолированном затворе нескольких уровней заряда — Multiple-Valued Level (MVL). Суть этой идеи в том, чтобы распознавать несколько уровней заряда изолированного затвора (а не просто состояние «заряжен/разряжен») и, тем самым, записывать в транзистор (ячейку памяти) не один, а несколько битов, в несколько раз увеличивая емкость хранения. Метод MVL применяется в NOR и NAND, но наиболее популярен в памяти типа NAND, где называется MultiLevel Cell (MLC, многоуровневые ячейки; точнее: ячейки с многоуровневым кодированием или ячейки с многоуровневым состоянием заряда). Современные микросхемы MLC NAND работают с четырьмя уровнями заряда, то есть позволяют хранить 2 бита информации, но на подходе микросхемы памяти с 3 и 4 битами на ячейку. Соответственно, обычная память NAND называется Single-Level Cell NAND (SLC). Для создания нескольких уровней заряда обычно используют более точные схемы управления программированием или пошаговую накачку за несколько последовательных операций программирования с более простой схемой управления. При считывании состояния ячейки MLC NAND применяется схема аналогово-цифрового преобразователя. Память SLC NAND, в сравнении с MLC NAND, имеет более высокие скорости передачи данных, меньшее энергопотребление и повышенную надежность. Например, для SLC NAND (при 90-нм допуске) вполне достаточно 1 бита кода ECC (Error Correction Code, код исправления ошибки), хотя любой контроллер MLC NAND обязан обеспечить 4 бита кода ECC (на 512-байтовый блок). Но цена MLC NAND, при прочих равных условиях, должна быть вдвое меньше аналогичной микросхемы SLC NAND. С точки зрения рядового потребителя более дешевая (или с большей емкостью) микросхема MLC NAND будет «тормозить» при воспроизведении видео либо почти на часы «задумается» при записи большого числа маленьких файлов. По разным причинам изготовители используют собственные названия для классификации микросхем флэш-памяти (например, StrataFlash от Intel относится к памяти типа NOR, Mirrorbit Flash от Spansion — к MLC NOR, а OneNAND от Samsung/Toshiba имеет архитектуру NAND с внешним интерфейсом памяти NOR Flash). Кроме того, многие недостатки MLC NAND позволяет скрыть (но не устранить) более совершенный контроллер, хотя SLC NAND всегда будет иметь более простой контроллер, меньшее энергопотребление и более высокие скорости передачи данных. Например, компания Samsung приводит следующие числовые характеристики для SLC/MLC NAND собственного производства (табл. 1). Таблица 1. Характеристики для SLC/MLC NAND Параметр SLC MLC Напряжение питания, В 3,3/1,8 3,3 Технологическая норма производства микросхем, мкм 0,12 0,16 Время доступа (макс.), мкс 25 70 Время программирования страницы (типовое) 250 мкс 1,2 мс Частичное программирование Да Нет Срок службы (программирование/стирание), тыс. операций 100 10 Скорость записи данных, Мбайт/с Более З 1,5 Краткая история флэш-памяти Можно было бы ограничиться списком распределения патентов на различные типы флэш-памяти среди компаний-изготовите-лей, но история этого вопроса весьма интересна и иногда поучительна, особенно если вспомнить о судьбе главного действующего лица — Фуджио Масуока. Сотрудник компании Toshiba Фуджио Масуока еще в 1980 г. от собственного имени подал заявку на патент, суть которого состояла в одновременном блочном обслуживании страниц памяти, что впоследствии и было названо технологией флэш. Родная компания не препятствовала работе своего сотрудника по этой теме, но и не уделяла этому никакого внимания, полностью сосредоточившись на новых разработках микросхем обычной оперативной памяти DRAM. Поэтому только через четыре года (в 1984 г.) Фуджио Масуока смог представить первый прототип флэш-памяти на Международной конференции разработчиков электроники (International Electronics Developers Meeting) в г. Сан-Диего (США). Американские компании правильно оценили потенциал этой работы и немедленно обратились в Toshiba с предложениями о сотрудничестве. Компания Toshiba опять не придала этому никакого значения, хотя и выделила в помощь Масуока примерно 5 сотрудников на неполный рабочий день (все они скрупулезно перечислены в официальной истории по версии Toshiba [10]). В это же время Intel полностью прекратила все работы по UV-EEPROM, и около 300 инженеров немедленно были привлечены к разработке в неожиданно открывшейся новой области. Поэтому Intel обогнала Toshiba и первой выпустила в 1988 г. кристалл флэш-памяти типа NOR. На следующий год флэш-микросхему NAND показала и Toshiba. Существуют разные мнения об интерпретации первого патента Масуока: была ли это память NOR, NAND или общий принцип обеих разновидностей. Однако Американский институт инженеров по электротехнике и радиоэлектронике (IEEE) в 1997 г. награ- дил Фуджио Масуока почетной премией им. Морриса Н. Либмана (Morris N. Liebman Memorial Award) именно как создателя флэш-памяти. Более того, долгое время от первенства в области флэш-памяти отказывались как Toshiba, так и Intel (поскольку Intel быстрее вышла на этап производства, но Toshiba первой начала реальные продажи). В Toshiba работу над NAND оценили в несколько сотен долларов в виде премии для Масуока (когда японская пресса назвала новую память наиболее выдающимся техническим достижением 1988 г.) и периодически пытались отстранить его от дальнейших исследований. В 1994 г. Фуджио Масуока покинул Toshiba и занял кафедру в одном из провинциальных японских университетов. К чести Toshiba, следует признать, что данная история послужила хорошим уроком, и теперь эта корпорация в приказном порядке финансирует и выделяет время для любых внеплановых разработок своих сотрудников (см. уже упоминавшееся руководство по проектированию устройств на основе памяти NAND — NAND Flash Applications Design Guide). Дальнейшая история флэш-памяти представлена в таблице 2 [8]. Оставим без подробного анализа и объяснения все последующие переходные разновидности: необходимо четко представлять, в чьих руках находятся основные патенты на флэш-память: • Патент на флэш-память NOR имеет Intel Corporation с 1998 г. • Патентом от 1989 г. на SLC NAND владеет Toshiba. • Компания San Disk получила патент на MLC NAND. Кроме того, для понимания рынка флэш-памяти важен еще один эмпирический закон, действующий уже более десяти лет. В технологическом аспекте память SLC NAND проще MLC NAND, поэтому при переходе на новую технологическую норму сначала появляется память SLC NAND, а затем MLC NAND. Задержка примерно равна интервалу перехода на новую норму допуска, то есть SLC всегда на одно поколение опережает MLC, и на рынке всегда присутствуют микросхемы SLC и MLC с одинаковой емкостью, но изготовленные с разными технологическими нормами. Контроллер Как мы уже знаем, принцип работы и организация флэш-памяти существенно отличаются как от обычной памяти, так и от накопителей на жестких дисках. Поэтому для согласования интерфейсов и обслуживания собственных потребностей банка флэш-памяти используется специальный контроллер (рис. 4), выполненный в виде отдельной микросхемы либо встроенный в микросхему флэш-памяти. Функции этого контроллера мы рассмотрим далее, но заранее отметим возможность программирования компанией, Таблица 2. История флэш-памяти в цифрах и фактах Год События Комментарии 19ЗЗ Intel представила первые кристаллы флэш-памяти NOR. Основана компания SunDisk (ныне SanDisk) Используются 150-мм пластины 19З9 Toshiba представила флэш-память NAND. Основана компания M-Systems, предложившая концепцию Flash Disk (предшественник флэш-дисков SSD) 1990 Toshiba начала поставки кристаллов NOR объемом 1 Мбайт 1991 Представлена первая карта памяти PCMCIA на основе флэш-памяти 1992 Information Storage Devices представила кристалл для диктофона на флэш-памяти. Подразделение флэш-памяти AMD (позже отделенное для слияния с аналогичным отделом Fujitsu и образования компании Spansion) представила NOR. Подразделение флэш-памяти Fujitsu (ныне в Spansion) выпустило память NOR. M-Systems показала файловую систему для флэш-памяти TrueFFS, впоследствии стандартизованную комитетом PCMCIA с названием FTL (Flash Translation Layer, уровень предобразования для работы с флэш-памятью) 1993 Datalight представила Card Trick — ПО для управления работой флэш-памяти 1994 SunDisk выпустила карту памяти CompactFlash Продажи флэш (NOR + NAND) превысили $1 млрд. Представлен 0,5-мкм процесс 1995 Toshiba представила карту памяти SmartMedia (первоначальное название — Solid State Floppy Disk Card). Casio выпустила цифровую камеру QV-11 с флэш-памятью. Подразделение Mitsubishi (ныне вошедшее в Renesas) объявило о создании технологии DiNOR. M-Systems предложила твердотельный накопитель SSD на флэш-памяти и систему DiskOnChip (NOR). SunDisk переименована в SanDisk 1996 Datalight представила FlashFX — ПО для управления флэш-памятью с одновременной поддержкой NOR и NAND. Palm выпустила одноименный PDA на флэш-памяти Показан 0,35-мкм процесс 1997 SaeHan Information Systems показала MP3-плеер MPMan на флэш-памяти. SanDisk и Siemens предложили MultiMedia Card (MMC и MMCplus). Sony показала карту памяти Memory Stick. Появился первый сотовый телефон с флэш-памятью. Intel начала поставки первой флэш-памяти MLC (StrataFlash). M-Systems представила DiskOnChip (NAND) Используются 200-мм пластины. Продано 500 млн флэш-микросхем 199З 250-нм технологический процесс. Продажи NOR превысили $2 млрд 1999 SanDisk, Toshiba и Matsushita предложили карту памяти SD. Micron представил NOR. Заявка из M-Systems на патент для флэш-диска USB Продано 1 млрд флэш-микросхем. Продажи NOR превысили $4 млрд 2000 На рынок флэш-памяти выходит Samsung. M-Systems (вместе с IBM) и Trek Technology представили флэш-диск USB (флэшку) Intel продала свой первый миллиард флэш-микросхем. 160-нм процесс. Продажи флэш (NOR + NAND) превысили $10 млрд 2001 Toshiba и SanDisk показали MLC NAND 1 Гбайт. SanDisk представила NAND (вместе с Toshiba). Подразделение флэш-продуктов Hitachi (ныне в составе Renesas) представило AG-AND. NEC предложила технологию MCP (MultiChip Package — удвоение объема памяти при размещении в одном корпусе двух кристаллов) Продажи NAND превысили $1 млрд 2002 Olympus и FujiFilm предложили карту памяти xDPicture Card. Ассоциация MMCA (MultiMediaCard Association) выпустила спецификацию карты памяти MMCmobile. Sony показала Memory Stick Pro и Memory Stick Duo. Spansion предложила технологию MirrorBit. Подразделения Hitachi и Mitsubishi объединены в Renesas 130-нм процесс 2003 SanDisk представила miniSD. Sony показала Memory Stick Micro. Подразделения AMD и Fujitsu объединены в Spansion Продажи NAND превысили $5 млрд 2004 SanDisk и M-Systems: ПО U3 для флэш-дисков USB. SanDisk и Motorola предложили карту памяти TransFlash. Samsung объявила 1 Гбайт флэш-память OneNAND для мобильных телефонов. Spansion представила MirrorBit Quad. Hynix и ST Micro создали совместное предприятие для флэш-продуктов. Samsung, Hynix и Infineon представили собственные NAND-продукты. Panasonic и Sanyo выпустили первые видеокамеры с флэш-памятью Цена NAND ниже цены памяти DRAM. 90-нм процесс. Выпущено 2 млрд флэш-микросхем (NOR и NAND) с объемом продаж более $15 млрд 2005 Apple представила iPod Shuffle и iPod Nano. Microsoft обнародовала концепцию гибридного жесткого диска Hybrid Hard Disk Drive. MMCA показала карту памяти MMCmicro. IMFT (Intel и Micron) выходит на рынок NAND, но выпускают и собственные продукты 70-нм процесс. Выпущено 3 млрд флэш-микросхем. Объем продаж в Гбайтах для NAND превысил DRAM. Продажи NAND превысили $10 млрд 2006 Intel представила Turbo Memory (первоначальное название — Robson Cache Memory). Microsoft объявила функцию ReadyBoost. SanDisk представила MLC-технологию с 3 битами. M-Systems заявила о MLC-технологии с 4 битами. SanDisk показала карту памяти microSDHC. SanDisk приобрела компанию M-Systems. Samsung показала первый гибридный накопитель Hybrid Hard Disk Drive 56-нм процесс. 300-мм пластины. Продажи флэш (NOR + NAND) превысили $20 млрд 2007 SanDisk: USB TV. Toshiba: eMMC NAND. Apple выпустила iPhone. SanDisk показала Vaulter PCIe SSD (сдвоенный накопитель для ноутбуков). Fusion-io: накопитель ioDrive, 640 Гбайт, NAND для материнских плат PCIex4. BiTMICRO: 3,5" SSD, 1,6 Тбайт (промышленное исполнение). Несколько MLC SSD с емкостью до 12З Гбайт. Dell: SSD для нескольких моделей ноутбуков. Microsoft: флэш-плеер Zune Продажи NAND — $14,5 млрд в общем объеме для флэш (NOR + NAND), равном $22 млрд 200З Подразделения Intel и STMicro объединены в Numonyx. EMC показала флэш-накопители SSD для серверов в промышленном исполнении. Apple предлагает MacBook Air в комплектации с SSD. Samsung и Sun создали флэш-память повышенной надежности для серверных накопителей SSD. Samsung показала 2,5" SSD с интерфейсом SATA II, 150 Гбайт (MLC). Несколько накопителей MLC SSD с емкостью до 256 Гбайт. Телефон Apple iPhone 3G с флэш-памятью 34-нм процесс (Intel и Micron) изготовителем конечного продукта. Контроллер флэш-памяти необходим для согласования выходного интерфейса микросхемы памяти с внешней шиной. Банк флэш-памяти состоит из страниц объемом 528 байт. Каждая страница содержит рабочую область (512 байт) и служебную часть (16 байт), предназначенную для записи контрольных кодов и резервирования рабочих ячеек памяти [9]. Именно контроллер флэш-памяти обеспечивает реализацию двух важных концепций, предложенных компанией M-Systems: фай- ловой системы флэш-памяти FFS (Flash File System) и ее новой версии TrueFFS (True Flash File System, истинная файловая система FFS), а также DOC (Disk-on-Chip, диск на микросхеме) для реализации накопителей SSD. Обе эти концепции заложили основу для эмуляции (моделирования работы) обычных накопителей на жестких дисках модулями флэш-памяти в тех областях, где условия окружающей среды просто не позволяют применять привычные магнитные диски с вращающимися пластинами и механическим позиционированием головок чтения/записи. Для флэш-памяти типа NAND также необходима функция первоначальной загрузки операционной системы, которая изначально поддерживается любой памятью типа NOR. Однако контроллер с функцией Bootable NAND (память NAND с загрузкой) позволяет полностью отказаться от NOR даже при реализации BIOS. Остальные усовершенствования в области контроллеров связаны со стандартизацией низкоуровневого интерфейса флэш-памяти, то есть интерфейса от банка флэш-памяти к контроллеру. Этим успешно занимается рабочая группа OSFI (Open NAND Flash Interface, открытый интерфейс памяти NAND). На данный момент разрабатываются три основные спецификации: 1. Самоидентификация NAND, позволяющая устройству NAND после аппаратного сброса объявить свои характеристики, включая схему памяти, поддерживаемые методы синхронизации и имеющиеся дополнительные возможности. 2. Стандартный набор команд. 3. Стандартная схема расположения контактов микросхем. Флэш-память в промышленном исполнении Устройства на основе флэш-памяти в промышленном исполнении нельзя считать лучшими или более совершенными в сравнении с устройствами бытового (коммерческого) применения только потому, что они дороже. Это устройства для других условий эксплуатации. Например, для бюджетного носимого плеера вполне достаточно обычной микросхемы флэш-памяти и обычного контроллера, поскольку основными критериями будут снижение стоимости и повышение емкости. Однако для портативного устройства считывания штрих-кодов, которое предполагается использовать в неотапливаемых складских помещениях, необходимы микросхема памяти и контроллер к ней в промышленном (индустриальном) исполнении. По всем показателям для промышленного использования более приспособлена память SLC NAND, благодаря своей надежности и сроку службы, но все чаще на рынке появляются устройства MLC NAND в промышленном исполнении, в которых недостатки флэш-памяти MLC устраняются более сложным кон- троллером. Такие устройства можно применять в промышленных условиях с не слишком жесткими требованиями, но в любом случае необходим тщательный анализ их технических характеристик. Технические характеристики промышленной флэш-памяти Любые заявления изготовителей о промышленной области применения, тяжелых условиях эксплуатации, повышенной надежности и прочих уникальных характеристиках должны быть подтверждены количественными показателями, желательно с сертификацией по общепринятым стандартам или нормам. Числовые характеристики промышленной флэш-памяти и устройств на ее основе позволяют точно выяснить возможные области применения. Для промышленной флэш-памяти обычно указываются следующие технические характеристики (причем отсутствие подтвержденных данных следует рассматривать как несоответствие данному критерию). Диапазон рабочих температур — наиболее простой и понятный критерий, позволяющий сразу определить принадлежность флэш-памяти к промышленному классу изделий. Диапазон рабочих температур промышленной флэш-памяти: от -40 до +85 °С при температуре хранения от -50 до +95 °С. У обычной флэш-памяти весьма неплохие, но более низкие температурные характеристики: от 0 до +70 °С при температуре хранения от -20 до +80 °С. Характеристики влажности и атмосферного давления у обоих типов памяти практически одинаковы: 5-95 % (10-90 %) влажности без конденсации и 21 тыс. метров над уровнем моря. Механические прочностные характеристики во многом определяются металлическим корпусом промышленных устройств флэш-памяти. Как правило, механические испытания проводятся по нормам американского военного стандарта MIL-STD-810F для подтверждения уровня вибраций 15 g (g — ускорение свободного падения), ударной прочности 1500 g, свободного падения на любую грань или угол с высоты более 1,5 м. Для флэш-памяти в пластмассовом корпусе данные о механической прочности обычно не указаны. Металлический корпус позволяет обеспечить для промышленной флэш-памяти высокий уровень защиты от проникновения воды и пыли, вплоть до классов защиты IP54 и IP68. Улучшить степень механической и электрической защиты позволяет нанесение на печатную плату и микросхемы специального конформного покрытия (conformal coating), которое не применяется в бытовых устройствах флэш-памяти. Функции контроллера для повышения надежности хранения информации Многие специальные сервисные функции реализованы как в промышленных, так и в бытовых контроллерах флэш-памяти. Однако в промышленных контроллерах используются специальные прошивки, то есть специальное программное обеспечение для обслуживания и работы в тяжелых условиях эксплуатации. К функциям контроллера по обеспечению надежности относятся следующие: • Выравнивание износа (wear leveling) позволяет устранить постоянную запись в начальные блоки памяти и равномерно распределять операции по всему банку памяти, увеличивая тем самым общий срок службы устройства. Для реализации используются алгоритмы динамической и статической оценки износа. Заметим, что выравнивание износа является обязательным для MLC NAND (менее 10 тыс. циклов программирования/стирания), но всего лишь дополнительным средством в SLC NAND (до 100 тыс. таких циклов). • Обнаружение и коррекция случайных ошибок (ECC/EDC) на основе дополнительных разрядов служит для устранения случайных сбоев. Применяются простые, но быстрые коды Хемминга, либо более сложные алгоритмы на основе кодов Рида-Соломона или BCH. Для памяти MLC требуются более длинные коды, поэтому схемы коррекции с одним разрядом для SLC не уступают по эффективности схемам с четырьмя и более разрядами для MLC. • Управление дефектными блоками (bad block management) используется для устранения ошибок, которые сохраняются после стирания блока памяти (в отличие от случайных ошибок записи/чтения, которые пропадают после стирания ячейки). Для замены дефектных ячеек сначала используются резервные разряды слова памяти, затем производится переназначение всего блока памяти на резервную область. Как правило, промышленные устройства флэш-памяти имеют более эффективные схемы управления дефектными блоками, позволяющие сущест- венно продлить заявленный срок службы устройства. Управление дефектными блоками происходит невидимо («прозрачно») для внешней системы, а наличие дефектных и резервирующих блоков памяти проявляется в расхождении между «форматированной» и «неформатированной» емкостью. • Контроль напряжения питания. В промышленных устройствах контроллер оснащен детектором напряжения питания, который блокирует операции с банком флэш-памяти при выходе питающего напряжения за допустимые границы (что позволяет извлекать флэш-накопители в любое время, без выполнения команды демонтирования перед отстыковкой устройства). Кроме того, многие устройства флэш-памяти допускают работу с одним из двух питающих напряжений (например, 3,3 или 5 В) при автоматической настройке на имеющееся напряжение питания. • Частичное программирование страницы (partial page programming) применяется в промышленных устройствах флэш-памяти. Минимальная единица программирования (записи) во флэш-памяти называется страницей (528 байт), а минимальная единица стирания — блоком (32 страницы), то есть блок состоит из нескольких страниц. Групповая схема применяется в современной памяти NAND не только для стирания, но и для программирования. Учет реального размера данных при записи (программировании) и использование указателей на сегменты данных внутри страницы позволяет пропустить «ненужные» операции стирания, последовательно записывая данные на страницу. Как правило, контроллеры промышленных устройств флэш-памяти поддерживают все перечисленные выше функции, хотя при бытовом исполнении отдельные функции могут отсутствовать. Срок службы устройств флэш-памяти пока не имеет решающего значения, поскольку флэшки морально устаревают (или просто теряются) еще до завершения заявленного срока службы. Но эта характеристика тесно связана с надежность работы, поэтому требует самого пристального внимания: • Наработка на отказ (MTBF, Mean Time Between Failures) определяется качеством микросхемы флэш-памяти и эффективностью коррекции случайных ошибок ECC/EDC вместе с управлением дефектными блоками. Для промышленных флэш-устройств этот параметр превышает 1 млн часов. • Срок хранения данных без внешних воздействий, то есть «чистый» срок хранения без операций стирания/программирования достаточно высок. Например, для промышленных микросхем флэш-памяти Samsung он превышает 10 лет по результатам тестов при повышенной температуре. Однако количество циклов чтения между последовательными операциями стира- ния (data retention) для промышленных исполнений составляет более 2 млн (SLC) и 300 тыс. (MLC), хотя для бытовых устройств этот показатель равен 1 млн (SLC) и 100 тыс. (MLC). Срок хранения данных между операциями стирания указывается для номинального температурного диапазона, однако следует заметить, что этот показатель практически экспоненциально уменьшается с ростом температуры, поэтому весьма нежелательно превышение заявленной максимальной температуры. Кроме того, ограничено количество самих операций программирования/стирания (data endurance), число которых для промышленного исполнения составляет более 300 тыс. (SLC) и около 20 тыс. (MLC), при 100 тыс. (SLC) и 10 тыс. (MLC) в бытовом (коммерческом) исполнении. Обычно изготовители пересчитывают эти данные в реальный срок службы устройства (хотя часто, особенно для MLC, при этом учитывается действие функции выравнивания износа) и гарантируют до 5 лет работы для промышленной флэш-памяти в сравнении с 1-3 годами для бытового исполнения. Заключение При выборе флэш-памяти для промышленного (или профессионального) использования недостаточно только сведений о емкости и стоимости. Необходимо учитывать характеристики надежности и выбирать специальное промышленное исполнение, которое, кроме прочего, обеспечивает и более высокую скорость обмена данными. Как правило, промышленная флэш-память должна относиться к типу SLC NAND, а технические характеристики памяти MLC NAND в металлических корпусах следует тщательно изучить и сравнить с аналогичными изделиями, выполненными по технологии SLC NAND. Ш ]]></text>
</doc>
